import{t as E}from"./index.BBNXm_8Y.js";import{_ as M,A as N,I as z,w as A,g as Q}from"./_plugin-vue_export-helper.7KydQm6F.js";import{L as j}from"./LoadingMessage.BFO-oF0q.js";import{b as w}from"./index.CjxOqI-u.js";import{b as O}from"./index.BMPHkLeA.js";/* empty css                         */import{c as y,b as m,e as f,w as s,a as _,F as q,r as P,g as v,j as T,o as l,m as k,f as c,d as S,t as d}from"./runtime-dom.esm-bundler.D_sgtVtG.js";/* empty css                         */import"./landings.Fs2A2SQT.js";const U={__name:"FilteredSongs",setup(b,{expose:o}){o();const x="es",e=w(),u=v(""),g=v("date"),t=v("desc"),h=v(!1),B=r=>{console.error("Error loading image:",r.target.src)},D=r=>{h.value=!0,g.value===r?C():g.value=r,setTimeout(()=>{h.value=!1},1e3)},C=()=>{t.value=t.value==="asc"?"desc":"asc"},V=r=>{const[a,n,i]=r.split("/").map(Number);return new Date(i,n-1,a)},L=r=>{if(!r)return"";const a=parseFloat(r.replace(",",".")),n=Math.floor(a/60),i=Math.floor(a%60);return`${n}:${i.toString().padStart(2,"0")}`},F=r=>{window.location.href=O(r)},I=T(()=>{let r=e;if(u.value){const a=u.value.toLowerCase();r=r.filter(n=>n.name.toLowerCase().includes(a))}return r.slice().sort((a,n)=>{let i=0;return g.value==="date"?i=V(a.date)-V(n.date):g.value==="time"?i=parseFloat(a.time.replace(",","."))-parseFloat(n.time.replace(",",".")):g.value==="name"&&(i=a.name.localeCompare(n.name)),t.value==="asc"?i:-i})}),p={lang:x,songs:e,searchQuery:u,sortOrder:g,sortDirection:t,isLoading:h,handleImageError:B,setSortOrder:D,toggleSortDirection:C,parseDate:V,formatTime:L,navigateToSong:F,filteredAndSortedSongs:I,get t(){return E},get VContainer(){return Q},get VButton(){return A},get VText(){return z},get VInput(){return N},ref:v,computed:T,LoadingMessage:j,get getSongs(){return w},get toSong(){return O}};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}},G={class:"sections-filtered"},H={class:"sections-filtered__content sections-filtered__content--songs"},J=["onClick"],K={class:"song-card__cover"},R=["src","alt"],W={class:"song-card__info"};function X(b,o,x,e,u,g){return l(),y("div",G,[m(e.VContainer,{class:"sections-filtered__search-bar",size:"xs"},{default:s(()=>[m(e.VInput,{type:"text",modelValue:e.searchQuery,"onUpdate:modelValue":o[0]||(o[0]=t=>e.searchQuery=t),placeholder:e.t("page.songs.searcher.placeholder"),class:"search-input"},null,8,["modelValue","placeholder"])]),_:1}),m(e.VContainer,{class:"sections-filtered__bar",size:"xs"},{default:s(()=>[m(e.VButton,{variant:"ghost",class:k({active:e.sortOrder==="date"}),onClick:o[1]||(o[1]=t=>e.setSortOrder("date"))},{default:s(()=>[c(d(e.t("page.songs.order.date"))+" ",1),e.sortOrder==="date"?(l(),_(e.VText,{key:0,color:"high"},{default:s(()=>[c(d(e.sortDirection==="asc"?"▲":"▼"),1)]),_:1})):S("",!0)]),_:1},8,["class"]),m(e.VButton,{variant:"ghost",class:k({active:e.sortOrder==="time"}),onClick:o[2]||(o[2]=t=>e.setSortOrder("time"))},{default:s(()=>[c(d(e.t("page.songs.order.duration"))+" ",1),e.sortOrder==="time"?(l(),_(e.VText,{key:0,color:"high"},{default:s(()=>[c(d(e.sortDirection==="asc"?"▲":"▼"),1)]),_:1})):S("",!0)]),_:1},8,["class"]),m(e.VButton,{variant:"ghost",class:k({active:e.sortOrder==="name"}),onClick:o[3]||(o[3]=t=>e.setSortOrder("name"))},{default:s(()=>[c(d(e.t("page.songs.order.name"))+" ",1),e.sortOrder==="name"?(l(),_(e.VText,{key:0,color:"high"},{default:s(()=>[c(d(e.sortDirection==="asc"?"▲":"▼"),1)]),_:1})):S("",!0)]),_:1},8,["class"])]),_:1}),f("div",H,[e.isLoading?(l(),_(e.LoadingMessage,{key:0,messages:[e.t("loading.adventure"),e.t("loading.book"),e.t("loading.characters"),e.t("loading.worlds"),e.t("loading.potions"),e.t("loading.treasures")],interval:1500},null,8,["messages"])):(l(!0),y(q,{key:1},P(e.filteredAndSortedSongs,t=>(l(),y("div",{key:t.key,class:"song-card",onClick:h=>e.navigateToSong(t.key)},[f("div",K,[f("img",{src:`/assets/stories/${e.lang}/${t.key}.webp`,alt:t.name,onError:e.handleImageError},null,40,R),o[4]||(o[4]=f("div",{class:"song-card__play"},[f("svg",{viewBox:"0 0 24 24",fill:"white"},[f("path",{d:"M8 5v14l11-7z"})])],-1))]),f("div",W,[m(e.VText,{as:"h2",variant:"subtitle",color:"high",class:"song-card__title"},{default:s(()=>[c(d(t.name),1)]),_:2},1024),t.time?(l(),_(e.VText,{key:0,variant:"caption",color:"medium"},{default:s(()=>[c(d(e.formatTime(t.time)),1)]),_:2},1024)):S("",!0)])],8,J))),128))])])}const ne=M(U,[["render",X],["__scopeId","data-v-9dc002b8"]]);export{ne as default};
