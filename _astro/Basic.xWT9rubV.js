import{b as L}from"./index.brZL-3I0.js";import{I as R}from"./index-FitP4J_6.TiJPR-Ae.js";import{u as x}from"./useStory.CxzHw2-Z.js";/* empty css                      */import{_ as D}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{g as p,e as a,c as C,b as n,w as l,d,t as _,a as T,n as E,r as u,j as y,f as k,k as B,o as c}from"./runtime-core.esm-bundler.Yc9PgZSd.js";const O={__name:"Basic",props:{title:{type:String,default:""},slug:{type:String,default:""},time:{type:Number,default:0},isStory:{type:Boolean,default:!0},isCharacter:{type:Boolean,default:!1},as:{type:String,default:"div"},progress:{type:Number,default:0},storyContent:{type:String,default:""}},setup(b,{expose:i}){i();const t="es",e=b,{getTime:m,getCurrentStatus:g}=x({key:e.slug,time:e.time}),I=()=>e.isStory?`/assets/stories/${t}/${e.slug}.webp`:e.isCharacter?`/assets/characters/${e.slug}.webp`:`/assets/sagas/${t}/${e.slug}.webp`,V=m(),o=u(null),f=u({}),v=u(!1),w=y(()=>(f.value.current||e.progress)>=100),N=y(()=>{if(!e.storyContent||!e.isStory)return"";const r=e.storyContent.replace(/\n+/g," ").trim(),h=120;return r.length>h?r.substring(0,h)+"...":r});let s;k(()=>{s=new IntersectionObserver(([r])=>{r.isIntersecting&&(v.value=!0,s.unobserve(o.value))},{threshold:.1}),o.value&&s.observe(o.value),f.value=e.progress||g()}),B(()=>{s&&o.value&&s.unobserve(o.value)});const S={lang:t,props:e,getTime:m,getCurrentStatus:g,getImage:I,renderedTime:V,cardRef:o,status:f,isIntersecting:v,isCompleted:w,storySnippet:N,get observer(){return s},set observer(r){s=r},get toStory(){return L},ref:u,onMounted:k,onUnmounted:B,computed:y,get VText(){return R},get useStory(){return x}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}},j=["href"],z={class:"basic-card__image-wrapper"},A={class:"basic-card__image"},M=["alt","src"],P={key:1,class:"basic-card__completed"},U={class:"basic-card__progress"},q={class:"basic-card__content"},F={class:"basic-card__article"};function G(b,i,t,e,m,g){return c(),p("a",{ref:"cardRef",class:"basic-card",href:e.toStory(t.slug)},[a("div",z,[a("div",A,[e.isIntersecting?(c(),p("img",{key:0,alt:`Imagen de ${t.title}`,class:"basic-card__img",aspectRatio:1/1,src:e.getImage(),loading:"lazy"},null,8,M)):n("",!0),i[0]||(i[0]=a("div",{class:"basic-card__image-overlay"},null,-1))]),t.time?(c(),C(e.VText,{key:0,class:"basic-card__time"},{default:l(()=>[d(_(e.renderedTime),1)]),_:1})):n("",!0),e.isCompleted?(c(),p("div",P,[T(e.VText,{class:"basic-card__completed-text"},{default:l(()=>[d(_(e.lang==="es"?"¡LEÍDO!":"READ!"),1)]),_:1})])):n("",!0),a("div",U,[a("div",{style:E({width:`${e.status.current||t.progress}%`}),class:"basic-card__progress-complete"},null,4)])]),a("div",q,[a("div",F,[T(e.VText,{class:"basic-card__title",variant:"header",color:"primary",maxLines:"2",as:t.as},{default:l(()=>[d(_(t.title),1)]),_:1},8,["as"]),e.storySnippet?(c(),C(e.VText,{key:0,class:"basic-card__snippet",variant:"body",color:"medium",maxLines:"3"},{default:l(()=>[d(_(e.storySnippet),1)]),_:1})):n("",!0)])])],8,j)}const Y=D(O,[["render",G],["__scopeId","data-v-76b3c100"]]);export{Y as B};
