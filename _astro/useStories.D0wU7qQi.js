import{b as c}from"./index.CqFlbLC_.js";import"./useStory.UFTN_M2T.js";const n=c();function I(){const o=[...n];return{getFirstStory:()=>o,getLastStory:()=>o[o.length-1],getRandomStory:()=>{const t=Math.floor(Math.random()*o.length);return o[t]},getAllStories:()=>o,getStoriesByPage:(t,e)=>{const a=(t-1)*e,r=a+e;return o.slice(a,r)},getLastNStories:t=>o.slice(-t),getRelatedStories:t=>{const e=o.filter(a=>a.saga===t.saga&&a.key!==t.key);if(e.length<10){const a=10-e.length,r=o.filter(s=>s.saga!==t.saga&&Math.abs(parseInt(s.time)-parseInt(t.time))<=50&&s.key!==t.key).sort((s,i)=>Math.abs(s.time-t.time)-Math.abs(i.time-t.time)).slice(0,a);return[...e,...r]}return e.slice(0,10)},getCompleteStories:()=>{if(typeof localStorage>"u")return[];try{const t=localStorage.getItem("storiesData");if(!t)return[];const e=JSON.parse(t);if(!Array.isArray(e))return[];const a=new Set(e.filter(r=>r.finished===!0).map(r=>r.key));return n.filter(r=>a.has(r.key))}catch{return[]}},getPendingStories:()=>{if(typeof localStorage>"u")return n;try{const t=localStorage.getItem("storiesData");if(!t)return n;const e=JSON.parse(t);if(!Array.isArray(e))return n;const a=new Set(e.filter(s=>s.finished!==!0).map(s=>s.key)),r=new Set(e.map(s=>s.key));return n.filter(s=>a.has(s.key)||!r.has(s.key))}catch{return n}},getFavoriteStories:()=>{if(typeof localStorage>"u")return[];try{const t=localStorage.getItem("storiesData");if(!t)return[];const e=JSON.parse(t);if(!Array.isArray(e))return[];const a=e.filter(r=>r.like===!0).map(r=>r.key);return o.filter(r=>a.includes(r.key))}catch{return[]}}}}export{I as u};
