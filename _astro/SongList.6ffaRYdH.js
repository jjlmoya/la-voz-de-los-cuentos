import{I as N}from"./index-FitP4J_6.QqNa7N4F.js";/* empty css                       */import{_ as R}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{g as b,o as v,e as s,a as O,c as T,b as j,w as k,d as x,t as M,n as D,m as z,r as l,f as V,l as I,F as q,h as P}from"./runtime-core.esm-bundler.OheDorFq.js";import{b as B}from"./index.Dj5k6ggm.js";const A={__name:"SongCard",props:{song:{type:Object,required:!0}},emits:["click"],setup(_,{expose:o,emit:t}){o();const e="es",r=_,d=t,n=l(null),m=l(!1),f=l(!1),C=l(2),w=l(0),S=l(0),F=()=>{d("click",r.song.key)},L=a=>{if(!a)return"";const i=parseFloat(a.replace(",",".")),c=Math.floor(i/60),u=Math.floor(i%60);return`${c}:${u.toString().padStart(2,"0")}`};let g=null;V(()=>{if(!n.value)return;C.value=2+Math.random()*2,w.value=Math.random()*2,S.value=-2+Math.random()*4,g=new IntersectionObserver(i=>{i.forEach(c=>{if(m.value=c.isIntersecting,c.isIntersecting){const u=c.boundingClientRect,p=window.innerHeight,h=u.top+u.height/2,E=p/2,H=Math.abs(h-E);f.value=H<350}else f.value=!1})},{threshold:[0,.25,.5,.75,1],rootMargin:"-100px 0px"}),g.observe(n.value);const a=()=>{if(!n.value||!m.value)return;const i=n.value.getBoundingClientRect(),c=window.innerHeight,u=i.top+i.height/2,p=c/2,h=Math.abs(u-p);f.value=h<350};window.addEventListener("scroll",a,{passive:!0}),I(()=>{g&&n.value&&g.unobserve(n.value),window.removeEventListener("scroll",a)})});const y={lang:e,props:r,emit:d,cardRef:n,isVisible:m,isInCenter:f,randomDuration:C,randomDelay:w,randomRotation:S,onClick:F,formatTime:L,get observer(){return g},set observer(a){g=a},get VText(){return N},ref:l,onMounted:V,onUnmounted:I};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},U={class:"song-card__cover"},$=["src","alt"],G={class:"song-card__info"};function J(_,o,t,e,r,d){return v(),b("div",{ref:"cardRef",class:z(["song-card",{"song-card--visible":e.isVisible,"song-card--center":e.isInCenter}]),style:D({"--random-duration":`${e.randomDuration}s`,"--random-delay":`${e.randomDelay}s`,"--random-rotation":`${e.randomRotation}deg`}),onClick:e.onClick},[o[1]||(o[1]=s("div",{class:"song-card__corner-decoration"},[s("img",{src:"/assets/icons/music-triangle.png",alt:"",class:"song-card__triangle"})],-1)),s("div",U,[s("img",{src:`/assets/stories/${e.lang}/${t.song.key}.webp`,alt:t.song.name,class:"song-card__image"},null,8,$),o[0]||(o[0]=s("div",{class:"song-card__play"},[s("svg",{viewBox:"0 0 24 24",fill:"white"},[s("path",{d:"M8 5v14l11-7z"})])],-1))]),s("div",G,[O(e.VText,{as:"h3",variant:"subtitle",color:"high",class:"song-card__title"},{default:k(()=>[x(M(t.song.name),1)]),_:1}),t.song.time?(v(),T(e.VText,{key:0,variant:"caption",color:"medium",class:"song-card__duration"},{default:k(()=>[x(M(e.formatTime(t.song.time)),1)]),_:1})):j("",!0)])],6)}const K=R(A,[["render",J],["__scopeId","data-v-84a9abeb"]]),Q={__name:"SongList",props:{songs:{type:Array,required:!0}},setup(_,{expose:o}){o();const r={props:_,handleSongClick:d=>{window.location.href=B(d)},SongCard:K,get toSong(){return B}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},W={class:"song-list"};function X(_,o,t,e,r,d){return v(),b("div",W,[(v(!0),b(q,null,P(t.songs,(n,m)=>(v(),T(e.SongCard,{key:n.key,song:n,style:D({"animation-delay":`${m*.05}s`}),onClick:e.handleSongClick},null,8,["song","style"]))),128))])}const oe=R(Q,[["render",X],["__scopeId","data-v-f8c6bcdf"]]);export{oe as S};
