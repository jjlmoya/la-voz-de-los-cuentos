import{I as H}from"./index-FitP4J_6.zeNsfuqk.js";/* empty css                       */import{_ as I}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{g as h,o as f,e as c,b as N,t as k,a as O,w as T,d as j,n as V,i as z,r as d,f as x,k as M,F as q,h as P,c as $}from"./runtime-core.esm-bundler.BXO2FSco.js";import{c as B}from"./index.brZL-3I0.js";const A={__name:"SongCard",props:{song:{type:Object,required:!0}},emits:["click"],setup(_,{expose:s,emit:n}){s();const e="es",l=_,g=n,o=d(null),m=d(!1),v=d(!1),S=d(2),C=d(0),w=d(0),D=()=>{g("click",l.song.key)},F=t=>{if(!t)return"";const r=typeof t=="number"?t:parseFloat(String(t).replace(",",".")),a=Math.floor(r/60),i=Math.floor(r%60);return`${a}:${i.toString().padStart(2,"0")}`},R=t=>{if(!t)return"";const r=typeof t=="number"?t:parseFloat(String(t).replace(",",".")),a=Math.floor(r/60),i=Math.floor(r%60);return`${a}:${i.toString().padStart(2,"0")}`};let u=null;x(()=>{if(!o.value)return;S.value=2+Math.random()*2,C.value=Math.random()*2,w.value=-2+Math.random()*4,u=new IntersectionObserver(r=>{r.forEach(a=>{if(m.value=a.isIntersecting,a.isIntersecting){const i=a.boundingClientRect,p=window.innerHeight,b=i.top+i.height/2,L=p/2,E=Math.abs(b-L);v.value=E<350}else v.value=!1})},{threshold:[0,.25,.5,.75,1],rootMargin:"-100px 0px"}),u.observe(o.value);const t=()=>{if(!o.value||!m.value)return;const r=o.value.getBoundingClientRect(),a=window.innerHeight,i=r.top+r.height/2,p=a/2,b=Math.abs(i-p);v.value=b<350};window.addEventListener("scroll",t,{passive:!0}),M(()=>{u&&o.value&&u.unobserve(o.value),window.removeEventListener("scroll",t)})});const y={lang:e,props:l,emit:g,cardRef:o,isVisible:m,isInCenter:v,randomDuration:S,randomDelay:C,randomRotation:w,onClick:D,formatTime:F,formatDurationBadge:R,get observer(){return u},set observer(t){u=t},get VText(){return H},ref:d,onMounted:x,onUnmounted:M};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},U={class:"song-card__cover"},G=["src","alt"],J={key:0,class:"song-card__duration-badge"},K={class:"song-card__info"};function Q(_,s,n,e,l,g){return f(),h("div",{ref:"cardRef",class:z(["song-card",{"song-card--visible":e.isVisible,"song-card--center":e.isInCenter}]),style:V({"--random-duration":`${e.randomDuration}s`,"--random-delay":`${e.randomDelay}s`,"--random-rotation":`${e.randomRotation}deg`}),onClick:e.onClick},[s[1]||(s[1]=c("div",{class:"song-card__corner-decoration"},[c("img",{src:"/assets/icons/music-triangle.png",alt:"",class:"song-card__triangle"})],-1)),c("div",U,[c("img",{src:`/assets/stories/${e.lang}/${n.song.key}.webp`,alt:n.song.name,class:"song-card__image"},null,8,G),n.song.duration||n.song.time?(f(),h("div",J,k(e.formatDurationBadge(n.song.duration||n.song.time)),1)):N("",!0),s[0]||(s[0]=c("div",{class:"song-card__play"},[c("svg",{viewBox:"0 0 24 24",fill:"white"},[c("path",{d:"M8 5v14l11-7z"})])],-1))]),c("div",K,[O(e.VText,{as:"h3",variant:"subtitle",color:"high",class:"song-card__title"},{default:T(()=>[j(k(n.song.name),1)]),_:1})])],6)}const W=I(A,[["render",Q],["__scopeId","data-v-1bcba2e0"]]),X={__name:"SongList",props:{songs:{type:Array,required:!0}},setup(_,{expose:s}){s();const l={props:_,handleSongClick:g=>{window.location.href=B(g)},SongCard:W,get toSong(){return B}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},Y={class:"song-list"};function Z(_,s,n,e,l,g){return f(),h("div",Y,[(f(!0),h(q,null,P(n.songs,(o,m)=>(f(),$(e.SongCard,{key:o.key,song:o,style:V({"animation-delay":`${m*.05}s`}),onClick:e.handleSongClick},null,8,["song","style"]))),128))])}const se=I(X,[["render",Z],["__scopeId","data-v-f8c6bcdf"]]);export{se as S};
