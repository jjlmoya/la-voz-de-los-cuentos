import{u as A}from"./useAchievements.y958XTq0.js";import{t as v}from"./index.BBvPNGtS.js";import{_ as D}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{g as o,o as r,e as t,b as k,t as c,n as w,m as x,j as u,F as b,h as S,a as I}from"./runtime-core.esm-bundler.OheDorFq.js";import"./achievementEvents.5tIAHR5d.js";import"./useStories.0FRDVsyE.js";import"./index.C0UmanwU.js";import"./landings.D6rrVUZj.js";import"./useStory.BLu1k2WU.js";const P={__name:"AchievementCard",props:{achievement:{type:Object,required:!0},showProgress:{type:Boolean,default:!0}},setup(g,{expose:d}){d();const s=g,e=u(()=>v(s.achievement.nameKey)),l=u(()=>v(s.achievement.descriptionKey));function m(){const _=s.achievement.iconId;return`/assets/achievements/${s.achievement.metadata?.folder||"read"}/${_}.png`}function a(_){console.warn("Failed to load achievement icon:",_.target.src),_.target.src="/assets/account/get-achievement.webp"}const f={props:s,name:e,description:l,getAchievementIcon:m,handleImageError:a,computed:u,get t(){return v}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}},N={class:"achievement-card__image"},C=["src","alt"],E={class:"achievement-card__content"},j={class:"achievement-card__name"},B={class:"achievement-card__description"},F={key:0,class:"achievement-card__progress"},U={class:"achievement-card__progress-bar"},K={class:"achievement-card__progress-text"},O={key:1,class:"achievement-card__unlock-badge"};function V(g,d,s,e,l,m){return r(),o("div",{class:x(["achievement-card",[`achievement-card--${s.achievement.type}`,{"achievement-card--locked":!s.achievement.unlocked}]])},[t("div",N,[t("img",{src:e.getAchievementIcon(),alt:e.name,class:"achievement-card__img",onError:e.handleImageError},null,40,C)]),t("div",E,[t("h3",j,c(e.name),1),t("p",B,c(s.achievement.unlocked?e.description:"???"),1),s.showProgress&&s.achievement.progress!==void 0?(r(),o("div",F,[t("div",U,[t("div",{class:"achievement-card__progress-fill",style:w({width:`${s.achievement.progress}%`})},null,4)]),t("p",K,c(s.achievement.current)+"/"+c(s.achievement.target),1)])):k("",!0),s.achievement.unlocked?(r(),o("div",O," âœ¨ ")):k("",!0)])],2)}const z=D(P,[["render",V],["__scopeId","data-v-752307d8"]]),L={__name:"AccountAchievementsSection",setup(g,{expose:d}){d();const{allAchievements:s,stats:e}=A(),l=u(()=>[...s.value].sort((n,i)=>n.unlocked===i.unlocked?0:n.unlocked?-1:1));function m(n){return v(n.nameKey)}function a(n){if(!n)return"/assets/account/get-achievement.webp";const i=s.value.find(y=>y.id===n||y.iconId===n),p=i?.metadata?.folder||"read",h=i?.iconId||n;return`/assets/achievements/${p}/${h}.png`}function f(n){if(!n)return"Fecha desconocida";const i=new Date(n),p=new Date,h=new Date(p);return h.setDate(h.getDate()-1),i.toDateString()===p.toDateString()?"Hoy":i.toDateString()===h.toDateString()?"Ayer":i.toLocaleDateString("es-ES",{month:"short",day:"numeric"})}const _={allAchievements:s,stats:e,sortedAchievements:l,getAchievementName:m,getIconPath:a,formatUnlockDate:f,computed:u,get useAchievements(){return A},AchievementCard:z,get t(){return v}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},q={class:"achievements-section"},H={class:"achievements-header"},G={class:"achievements-header__content"},J={class:"achievements-header__title"},M={class:"achievements-header__subtitle"},Q={class:"achievements-header__progress"},R={class:"progress-bar"},T={class:"progress-text"},W={class:"achievements-grid"},X={key:1,class:"empty-state"},Y={class:"empty-state__text"},Z={key:0,class:"achievements-stats"},$={class:"achievements-stats__title"},ee={class:"recent-unlocks"},te=["src","alt"],se={class:"recent-unlock__info"},ne={class:"recent-unlock__name"},ce={class:"recent-unlock__date"};function ae(g,d,s,e,l,m){return r(),o("div",q,[t("div",H,[t("div",G,[d[0]||(d[0]=t("img",{src:"/assets/account/achievements.webp",alt:"Achievements",class:"achievements-header__icon"},null,-1)),t("div",null,[t("h2",J,c(e.t("page.account.achievements")),1),t("p",M,c(e.stats.unlockedCount)+" / "+c(e.stats.totalAchievements)+" "+c(e.t("achievements.unlocked")),1)])]),t("div",Q,[t("div",R,[t("div",{class:"progress-bar__fill",style:w({width:`${e.stats.progressPercentage}%`})},null,4)]),t("p",T,c(e.stats.progressPercentage)+"%",1)])]),t("div",W,[e.sortedAchievements.length>0?(r(!0),o(b,{key:0},S(e.sortedAchievements,a=>(r(),o("div",{key:a.id,class:"achievement-item"},[I(e.AchievementCard,{achievement:a,"show-progress":!0},null,8,["achievement"])]))),128)):(r(),o("div",X,[t("p",Y,c(e.t("achievements.empty")),1)]))]),e.stats.recentUnlocks.length>0?(r(),o("div",Z,[t("h3",$,c(e.t("achievements.recent")),1),t("div",ee,[(r(!0),o(b,null,S(e.stats.recentUnlocks,a=>(r(),o("div",{key:a.id,class:"recent-unlock"},[t("img",{src:e.getIconPath(a.id),alt:e.getAchievementName(a),class:"recent-unlock__icon"},null,8,te),t("div",se,[t("p",ne,c(e.getAchievementName(a)),1),t("p",ce,c(e.formatUnlockDate(a.unlockedAt)),1)])]))),128))])])):k("",!0)])}const ue=D(L,[["render",ae],["__scopeId","data-v-a4f5c54c"]]);export{ue as default};
