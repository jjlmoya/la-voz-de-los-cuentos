import{_ as V,I as N}from"./_plugin-vue_export-helper.Du-30fKt.js";/* empty css                       */import{f as C,o as v,e as s,a as O,c as I,b as j,w,d as S,t as y,n as B,m as z,r as l,h as k,l as x,F as q,g as P}from"./runtime-dom.esm-bundler.C3DI30_X.js";import{b as M}from"./index.BMPHkLeA.js";const A={__name:"SongCard",props:{song:{type:Object,required:!0}},emits:["click"],setup(m,{expose:o,emit:t}){o();const e="es",r=m,d=t,n=l(null),u=l(!1),f=l(!1),R=l(2+Math.random()*2),T=l(Math.random()*2),D=l(-2+Math.random()*4),F=()=>{d("click",r.song.key)},L=a=>{if(!a)return"";const i=parseFloat(a.replace(",",".")),c=Math.floor(i/60),_=Math.floor(i%60);return`${c}:${_.toString().padStart(2,"0")}`};let g=null;k(()=>{if(!n.value)return;g=new IntersectionObserver(i=>{i.forEach(c=>{if(u.value=c.isIntersecting,c.isIntersecting){const _=c.boundingClientRect,p=window.innerHeight,h=_.top+_.height/2,E=p/2,H=Math.abs(h-E);f.value=H<350}else f.value=!1})},{threshold:[0,.25,.5,.75,1],rootMargin:"-100px 0px"}),g.observe(n.value);const a=()=>{if(!n.value||!u.value)return;const i=n.value.getBoundingClientRect(),c=window.innerHeight,_=i.top+i.height/2,p=c/2,h=Math.abs(_-p);f.value=h<350};window.addEventListener("scroll",a,{passive:!0}),x(()=>{g&&n.value&&g.unobserve(n.value),window.removeEventListener("scroll",a)})});const b={lang:e,props:r,emit:d,cardRef:n,isVisible:u,isInCenter:f,randomDuration:R,randomDelay:T,randomRotation:D,onClick:F,formatTime:L,get observer(){return g},set observer(a){g=a},get VText(){return N},ref:l,onMounted:k,onUnmounted:x};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},U={class:"song-card__cover"},$=["src","alt"],G={class:"song-card__info"};function J(m,o,t,e,r,d){return v(),C("div",{ref:"cardRef",class:z(["song-card",{"song-card--visible":e.isVisible,"song-card--center":e.isInCenter}]),style:B({"--random-duration":`${e.randomDuration}s`,"--random-delay":`${e.randomDelay}s`,"--random-rotation":`${e.randomRotation}deg`}),onClick:e.onClick},[o[1]||(o[1]=s("div",{class:"song-card__corner-decoration"},[s("img",{src:"/assets/icons/music-triangle.png",alt:"",class:"song-card__triangle"})],-1)),s("div",U,[s("img",{src:`/assets/stories/${e.lang}/${t.song.key}.webp`,alt:t.song.name,class:"song-card__image"},null,8,$),o[0]||(o[0]=s("div",{class:"song-card__play"},[s("svg",{viewBox:"0 0 24 24",fill:"white"},[s("path",{d:"M8 5v14l11-7z"})])],-1))]),s("div",G,[O(e.VText,{as:"h3",variant:"subtitle",color:"high",class:"song-card__title"},{default:w(()=>[S(y(t.song.name),1)]),_:1}),t.song.time?(v(),I(e.VText,{key:0,variant:"caption",color:"medium",class:"song-card__duration"},{default:w(()=>[S(y(e.formatTime(t.song.time)),1)]),_:1})):j("",!0)])],6)}const K=V(A,[["render",J],["__scopeId","data-v-61ecfca4"]]),Q={__name:"SongList",props:{songs:{type:Array,required:!0}},setup(m,{expose:o}){o();const r={props:m,handleSongClick:d=>{window.location.href=M(d)},SongCard:K,get toSong(){return M}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},W={class:"song-list"};function X(m,o,t,e,r,d){return v(),C("div",W,[(v(!0),C(q,null,P(t.songs,(n,u)=>(v(),I(e.SongCard,{key:n.key,song:n,style:B({"animation-delay":`${u*.05}s`}),onClick:e.handleSongClick},null,8,["song","style"]))),128))])}const ne=V(Q,[["render",X],["__scopeId","data-v-f8c6bcdf"]]);export{ne as S};
