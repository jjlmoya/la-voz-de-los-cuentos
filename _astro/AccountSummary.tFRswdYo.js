import{I as R}from"./index-FitP4J_6.TiJPR-Ae.js";import{u as A}from"./useStories.B96ulDsN.js";import{u as P}from"./useAchievements.DAZ-nXoM.js";import{u as b}from"./useGameification.CY40ESLV.js";import{f as X,m as D,n as I,o as K}from"./index.brZL-3I0.js";import{t as B}from"./index.sXTMffxN.js";import{_ as N}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{g as _,e,t as s,n as j,r as u,j as d,f as S,o as v}from"./runtime-core.esm-bundler.Yc9PgZSd.js";import"./runtime-dom.esm-bundler.BU_tAFEj.js";import"./index.DURh_9Xy.js";import"./useStory.CxzHw2-Z.js";import"./achievementEvents.DHKWVqNG.js";const E={__name:"AccountSummary",props:{lang:{type:String,default:"es"}},setup(y,{expose:c}){c();const f=y,{getAllStories:a}=A(),{unlockedAchievements:m}=P(),{playerProfile:r}=b(),g=u(0),i=u(0),p=u(0),k=d(()=>r.value.level>=20?100:r.value.currentLevelXP/r.value.nextLevelXP*100);S(()=>{if(!(typeof localStorage>"u"))try{const l=localStorage.getItem("storiesData"),o=a();if(!l){i.value=o.length;return}const n=JSON.parse(l);if(!Array.isArray(n)){i.value=o.length;return}const x=new Set(n.filter(t=>t&&t.finished===!0).map(t=>t.key));g.value=o.filter(t=>x.has(t.key)).length;const C=new Set(n.filter(t=>t&&t.finished!==!0).map(t=>t.key)),L=new Set(n.filter(t=>t).map(t=>t.key));i.value=o.filter(t=>C.has(t.key)||!L.has(t.key)).length;const F=n.filter(t=>t&&t.like===!0).map(t=>t.key);p.value=o.filter(t=>F.includes(t.key)).length}catch(l){console.error("Error al calcular resÃºmenes de cuenta:",l)}});const w=d(()=>m.value.length),h={props:f,getAllStories:a,unlockedAchievements:m,playerProfile:r,readCount:g,pendingCount:i,favoriteCount:p,progressPercentage:k,achievementCount:w,computed:d,ref:u,onMounted:S,get VText(){return R},get useStories(){return A},get useAchievements(){return P},get useGameification(){return b},get toAccountRead(){return K},get toAccountPending(){return I},get toAccountFavorites(){return D},get toAccountAchievements(){return X},get t(){return B}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},G={class:"account-summary"},M={class:"account-summary__grid"},O={class:"account-summary__card account-summary__card--level account-summary__card--featured"},V={class:"account-summary__level-badge"},z=["src","alt"],J={class:"account-summary__level-number"},T={class:"account-summary__level-title"},q={class:"account-summary__level-progress-container"},H={class:"account-summary__level-progress-bar"},Q={class:"account-summary__level-progress-text"},U={key:0},W={key:1},Y=["href"],Z={class:"account-summary__card-number"},$={class:"account-summary__card-label"},ee=["href"],te={class:"account-summary__card-number"},ae={class:"account-summary__card-label"},se=["href"],ce={class:"account-summary__card-number"},re={class:"account-summary__card-label"},oe=["href"],ne={class:"account-summary__card-number"},ie={class:"account-summary__card-label"};function le(y,c,f,a,m,r){return v(),_("div",G,[e("div",M,[e("div",O,[e("div",V,[e("img",{src:`/assets/account/dashboard-assets/avatar-level-${a.playerProfile.level}.webp`,alt:`Level ${a.playerProfile.level}`,class:"account-summary__level-avatar"},null,8,z),e("div",J,s(a.playerProfile.level),1)]),e("div",T,s(a.t(a.playerProfile.titleKey)),1),e("div",q,[e("div",H,[e("div",{class:"account-summary__level-progress-fill",style:j({width:a.progressPercentage+"%"})},null,4)]),e("div",Q,[a.playerProfile.level<20?(v(),_("span",U,s(a.playerProfile.currentLevelXP)+" / "+s(a.playerProfile.nextLevelXP)+" XP ",1)):(v(),_("span",W," Nivel MÃ¡ximo ðŸŽ‰ "))])])]),e("a",{href:a.toAccountRead(),class:"account-summary__card account-summary__card--read"},[c[0]||(c[0]=e("div",{class:"account-summary__card-icon"},[e("img",{src:"/assets/account/read.webp",alt:"Read",class:"account-summary__icon-image"})],-1)),e("div",Z,s(a.readCount),1),e("div",$,s(a.props.lang==="es"?"LeÃ­dos":"Read"),1)],8,Y),e("a",{href:a.toAccountPending(),class:"account-summary__card account-summary__card--pending"},[c[1]||(c[1]=e("div",{class:"account-summary__card-icon"},[e("img",{src:"/assets/account/pending.webp",alt:"Pending",class:"account-summary__icon-image"})],-1)),e("div",te,s(a.pendingCount),1),e("div",ae,s(a.props.lang==="es"?"Pendientes":"Pending"),1)],8,ee),e("a",{href:a.toAccountFavorites(),class:"account-summary__card account-summary__card--favorites"},[c[2]||(c[2]=e("div",{class:"account-summary__card-icon"},[e("img",{src:"/assets/account/favorites.webp",alt:"Favorites",class:"account-summary__icon-image"})],-1)),e("div",ce,s(a.favoriteCount),1),e("div",re,s(a.props.lang==="es"?"Favoritos":"Favorites"),1)],8,se),e("a",{href:a.toAccountAchievements(),class:"account-summary__card account-summary__card--achievements"},[c[3]||(c[3]=e("div",{class:"account-summary__card-icon"},[e("img",{src:"/assets/account/achievements.webp",alt:"Achievements",class:"account-summary__icon-image"})],-1)),e("div",ne,s(a.achievementCount),1),e("div",ie,s(a.props.lang==="es"?"Logros":"Achievements"),1)],8,oe)])])}const be=N(E,[["render",le],["__scopeId","data-v-963f4e22"]]);export{be as default};
