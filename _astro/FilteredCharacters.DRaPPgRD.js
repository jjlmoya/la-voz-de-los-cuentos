import{t as F}from"./index.CW802EIY.js";import{_ as N,g as P,w as M,I as T,A as R}from"./_plugin-vue_export-helper.C9hBSDQp.js";import{u as L,g as Q,B as z}from"./Basic.PU33DIGA.js";import{P as j}from"./Plain.Cn-xtVl3.js";/* empty css                            */import{r as u,f as I,g as k,a as C,w as g,e as q,F as O,h as A,d as V,c as f,n as x,o as l,b as v,t as S}from"./runtime-dom.esm-bundler.BomD5kKh.js";import"./landings.QdnRsL1j.js";/* empty css                            *//* empty css                            */const b=Q();function D(){const o=[...b];return{getFirstStory:()=>o,getLastStory:()=>o[o.length-1],getRandomStory:()=>{const t=Math.floor(Math.random()*o.length);return o[t]},getAllCharacters:()=>o,getCharactersByPage:(t,s)=>{const a=(t-1)*s,c=a+s;return o.slice(a,c)},getLastNCharacters:t=>o.slice(-t),getRelatedCharacters:t=>{const s=o.filter(a=>a.saga===t.saga&&a.key!==t.key);if(s.length<10){const a=10-s.length,c=o.filter(n=>n.saga!==t.saga&&Math.abs(parseInt(n.time)-parseInt(t.time))<=50&&n.key!==t.key).sort((n,m)=>Math.abs(n.time-t.time)-Math.abs(m.time-t.time)).slice(0,a);return[...s,...c]}return s.slice(0,10)},getCompleteCharacters:()=>b.filter(t=>{const{isComplete:s}=L(t);return s()}),getPendingCharacters:()=>b.filter(t=>{const{isComplete:s}=L(t);return!s()}),getFavoriteCharacters:()=>(JSON.parse(localStorage?.getItem("charactersData"))||[]).filter(t=>t.like)}}const E={__name:"FilteredCharacters",setup(o,{expose:i}){i();const{getAllCharacters:_}=D(),e=_(),h=u(""),d=u("date"),r=u("desc"),w=u(!1),B=a=>{d.value===a?p():d.value=a},p=()=>{r.value=r.value==="asc"?"desc":"asc"},y=a=>{const[c,n]=a.split("-").map(Number);return new Date(2024,n-1,c)},t=I(()=>{let a=e;if(h.value){const c=h.value.toLowerCase();a=a.filter(n=>n.name.toLowerCase().includes(c))}return a.slice().sort((c,n)=>{let m=0;return d.value==="date"?m=y(c.birthday)-y(n.birthday):d.value==="name"&&(m=c.name.localeCompare(n.name)),r.value==="asc"?m:-m})}),s={getAllCharacters:_,stories:e,searchQuery:h,sortOrder:d,sortDirection:r,isListView:w,setSortOrder:B,toggleSortDirection:p,parseDate:y,filteredAndSortedCharacters:t,get t(){return F},get VContainer(){return P},get VButton(){return M},get VText(){return T},get VInput(){return R},ref:u,computed:I,BasicCard:z,PlainCard:j,get useCharacters(){return D}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},J={class:"sections-filtered"};function U(o,i,_,e,h,d){return l(),k("div",J,[C(e.VContainer,{class:"sections-filtered__search-bar",size:"xs"},{default:g(()=>[C(e.VInput,{type:"text",modelValue:e.searchQuery,"onUpdate:modelValue":i[0]||(i[0]=r=>e.searchQuery=r),placeholder:e.t("page.characters.searcher.placeholder"),class:"search-input"},null,8,["modelValue","placeholder"])]),_:1}),C(e.VContainer,{class:"sections-filtered__bar",size:"xs"},{default:g(()=>[C(e.VButton,{variant:"ghost",class:x({active:e.sortOrder==="date"}),onClick:i[1]||(i[1]=r=>e.setSortOrder("date"))},{default:g(()=>[v(S(e.t("page.characters.order.birthday"))+" ",1),e.sortOrder==="date"?(l(),f(e.VText,{key:0,color:"high"},{default:g(()=>[v(S(e.sortDirection==="asc"?"▲":"▼"),1)]),_:1})):V("",!0)]),_:1},8,["class"]),C(e.VButton,{variant:"ghost",class:x({active:e.sortOrder==="name"}),onClick:i[2]||(i[2]=r=>e.setSortOrder("name"))},{default:g(()=>[v(S(e.t("page.characters.order.name"))+" ",1),e.sortOrder==="name"?(l(),f(e.VText,{key:0,color:"high"},{default:g(()=>[v(S(e.sortDirection==="asc"?"▲":"▼"),1)]),_:1})):V("",!0)]),_:1},8,["class"])]),_:1}),q("div",{class:x(["sections-filtered__content",{"list-view":e.isListView}])},[e.isListView?V("",!0):(l(!0),k(O,{key:0},A(e.filteredAndSortedCharacters,r=>(l(),f(e.BasicCard,{as:"h2",slug:r.key,key:r.key,title:r.name,isCharacter:"",isStory:!1},null,8,["slug","title"]))),128)),e.isListView?(l(),f(e.VContainer,{key:1,class:"sections-filtered__content-list"},{default:g(()=>[(l(!0),k(O,null,A(e.filteredAndSortedCharacters,r=>(l(),f(e.PlainCard,{key:r.key,story:r,isCharacter:""},null,8,["story"]))),128))]),_:1})):V("",!0)],2)])}const te=N(E,[["render",U],["__scopeId","data-v-d9dd94eb"]]);export{te as default};
