import{t as C}from"./index.C5Cnp1uk.js";import{v as B}from"./runtime-dom.esm-bundler.0lIbTe_P.js";import{I as w,g as T,A,w as D}from"./index-FitP4J_6.QqNa7N4F.js";/* empty css                         */import{_ as I}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as M,w as s,r as f,o as c,g as i,b as m,e as r,a as o,t,d as n,i as N}from"./runtime-core.esm-bundler.OheDorFq.js";const O={__name:"CustomPage",setup(h,{expose:a}){a();const _="https://script.google.com/macros/s/AKfycbyf8f9poDw0Jh26Ieniy0eYZELfDpXwHlC43BWqihDzBCkmExaVhFELYQ2og72CCZHM/exec",e="es",u=f(1),d=f({name:"",story:"",email:"",receiveAll:!0}),l=f(!1),p=f(!1),g=f(!1),b=()=>{u.value<4&&u.value++},k=()=>{u.value>1&&u.value--},S=()=>{d.value.receiveAll=!1,y()};async function v(){d.value.receiveAll&&await fetch(_,{method:"POST",body:JSON.stringify({email:d.value.email,lang:e,story:!0}),headers:{"Content-Type":"text/plain;charset=utf-8"}})}const y=async()=>{b(),l.value=!0,p.value=!1,g.value=!1;try{const V=await fetch("https://script.google.com/macros/s/AKfycbyXxWrBmQDXCDIg5v-bc4YnkDU5YHu43a8HeGVNdoknYDK50bBnLg9gcAbP4Myw14lr/exec",{method:"POST",body:JSON.stringify(d.value),headers:{"Content-Type":"text/plain;charset=utf-8"}});v(),V.ok?p.value=!0:g.value=!0}catch{g.value=!0}finally{l.value=!1}},x={newsletterEndpoint:_,lang:e,currentStep:u,form:d,loading:l,successMessage:p,errorMessage:g,nextStep:b,prevStep:k,submitFormWithoutSubscription:S,addNewsletter:v,submitForm:y,get t(){return C},ref:f,get VButton(){return D},get VInput(){return A},get VContainer(){return T},get VText(){return w}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},E={key:0,class:"custom-page-step"},P={class:"custom-page-step__buttons"},F={key:1,class:"custom-page-step"},Y={class:"custom-page-step__buttons"},H={key:2,class:"custom-page-step"},U={class:"custom-page-step__buttons"},W={key:3,class:"custom-page-step"},J={class:"custom-page-step__buttons"},K={key:4,class:"custom-page-loader"},L={key:5,class:"custom-page-success-message"},X={key:6,class:"custom-page-error-message"};function q(h,a,_,e,u,d){return c(),M(e.VContainer,{size:"xs",class:"custom-page"},{default:s(()=>[e.currentStep===1?(c(),i("div",E,[r("h2",null,t(e.t("page.custom.input.name")),1),o(e.VInput,{"aria-label":`Input ${e.t("page.custom.input.name")}`,type:"text",modelValue:e.form.name,"onUpdate:modelValue":a[0]||(a[0]=l=>e.form.name=l)},null,8,["aria-label","modelValue"]),r("div",P,[o(e.VButton,{onClick:e.nextStep,disabled:!e.form.name},{default:s(()=>[n(t(e.t("page.custom.button.next")),1)]),_:1},8,["disabled"])])])):m("",!0),e.currentStep===2?(c(),i("div",F,[r("h2",null,[n(t(e.t("page.custom.input.story"))+" ",1),a[3]||(a[3]=r("span",{class:"custom-page-mandatory"},"*",-1))]),N(r("textarea",{"aria-label":"Area de texto para describir el cuento","onUpdate:modelValue":a[1]||(a[1]=l=>e.form.story=l),required:""},null,512),[[B,e.form.story]]),r("div",Y,[o(e.VButton,{onClick:e.prevStep},{default:s(()=>[n(t(e.t("page.custom.button.prev")),1)]),_:1}),o(e.VButton,{onClick:e.nextStep,disabled:!e.form.story},{default:s(()=>[n(t(e.t("page.custom.button.next")),1)]),_:1},8,["disabled"])])])):m("",!0),e.currentStep===3?(c(),i("div",H,[r("h2",null,t(e.t("page.custom.input.email")),1),o(e.VInput,{"aria-label":"Email",type:"email",modelValue:e.form.email,"onUpdate:modelValue":a[2]||(a[2]=l=>e.form.email=l),placeholder:"abc@email.com"},null,8,["modelValue"]),r("div",U,[o(e.VButton,{onClick:e.prevStep},{default:s(()=>[n(t(e.t("page.custom.button.prev")),1)]),_:1}),o(e.VButton,{onClick:e.nextStep,disabled:!e.form.email||e.form.email.indexOf("@")===-1||e.form.email.indexOf(".")===-1},{default:s(()=>[n(t(e.t("page.custom.button.next")),1)]),_:1},8,["disabled"])])])):m("",!0),e.currentStep===4&&!e.loading&&!e.successMessage?(c(),i("div",W,[o(e.VText,null,{default:s(()=>[n(t(e.t("page.custom.input.newsletter")),1)]),_:1}),r("div",J,[o(e.VButton,{onClick:e.submitForm},{default:s(()=>[n(t(e.t("page.custom.button.accept")),1)]),_:1}),o(e.VButton,{onClick:e.submitFormWithoutSubscription},{default:s(()=>[n(t(e.t("page.custom.button.decline")),1)]),_:1})])])):m("",!0),e.loading?(c(),i("div",K,[a[4]||(a[4]=r("div",{class:"magic-spinner"},[r("div",{class:"magic-spinner__wand"})],-1)),o(e.VText,null,{default:s(()=>[n(t(e.t("page.custom.button.loading")),1)]),_:1})])):m("",!0),e.successMessage?(c(),i("div",L,[o(e.VText,null,{default:s(()=>[n(t(e.t("page.custom.button.success")),1)]),_:1})])):m("",!0),e.errorMessage?(c(),i("div",X,[o(e.VText,null,{default:s(()=>[n(t(e.t("page.custom.button.error")),1)]),_:1})])):m("",!0)]),_:1})}const $=I(O,[["render",q],["__scopeId","data-v-535f8067"]]);export{$ as default};
