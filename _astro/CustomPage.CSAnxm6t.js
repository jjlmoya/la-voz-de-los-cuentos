import{t as f}from"./index.OSe-SMOM.js";import{w as M,A as J,I as $,g as ee}from"./index-FitP4J_6.zeNsfuqk.js";/* empty css                         */import{_ as w}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{g as u,e as t,d as p,t as n,F as T,h as B,a as m,w as _,o as i,n as H,j as C,i as R,b as g,f as I,r as v,c as A,A as te}from"./runtime-core.esm-bundler.BXO2FSco.js";import{T as U}from"./runtime-dom.esm-bundler.C5aP_0aL.js";import{S as se}from"./Share.CsX9Fbmz.js";import{g as E}from"./index.brZL-3I0.js";/* empty css                         */const oe={__name:"CustomWelcome",emits:["start"],setup(o,{expose:s}){s();const e={steps:[{iconName:"pencil",title:f("page.custom.welcome.step1.title"),description:f("page.custom.welcome.step1.description")},{iconName:"book",title:f("page.custom.welcome.step2.title"),description:f("page.custom.welcome.step2.description")},{iconName:"envelope",title:f("page.custom.welcome.step3.title"),description:f("page.custom.welcome.step3.description")}],get t(){return f},get VButton(){return M}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},ae={class:"custom-welcome"},ne={class:"custom-welcome__content"},ce={class:"custom-welcome__badge"},re={class:"custom-welcome__title"},le={class:"custom-welcome__description"},ie={class:"custom-welcome__steps"},ue={class:"custom-welcome__step-icon"},me=["src","alt"],de={class:"custom-welcome__step-title"},_e={class:"custom-welcome__step-description"},pe={class:"custom-welcome__cta"},ge={class:"custom-welcome__benefits"},fe={class:"custom-welcome__benefit"},he={class:"custom-welcome__benefit"},ve={class:"custom-welcome__benefit"};function Se(o,s,a,e,r,l){return i(),u("div",ae,[s[6]||(s[6]=t("div",{class:"custom-welcome__hero"},[t("img",{src:"/assets/custom/welcome-hero.webp",alt:"Welcome to Custom Story",class:"custom-welcome__image",loading:"lazy",decoding:"async"})],-1)),t("div",ne,[t("div",ce,[s[1]||(s[1]=t("img",{src:"/assets/custom/icon-sparkles.webp",alt:"Magia",class:"custom-welcome__badge-icon",loading:"lazy",decoding:"async"},null,-1)),p(" "+n(e.t("page.custom.welcome.badge")),1)]),t("h1",re,n(e.t("page.custom.h1")),1),t("p",le,n(e.t("page.custom.description")),1),t("div",ie,[(i(),u(T,null,B(e.steps,(c,d)=>t("div",{key:d,class:"custom-welcome__step"},[t("div",ue,[t("img",{src:`/assets/custom/icon-${c.iconName}.webp`,alt:c.title,class:"custom-welcome__icon-img",loading:"lazy",decoding:"async"},null,8,me)]),t("h3",de,n(c.title),1),t("p",_e,n(c.description),1)])),64))]),t("div",pe,[m(e.VButton,{size:"lg",onClick:s[0]||(s[0]=c=>o.$emit("start")),variant:"primary",class:"custom-welcome__button"},{default:_(()=>[p(n(e.t("page.custom.welcome.start"))+" ",1),s[2]||(s[2]=t("span",{class:"custom-welcome__button-arrow"},"→",-1))]),_:1})]),t("div",ge,[t("div",fe,[s[3]||(s[3]=t("img",{src:"/assets/custom/icon-gift.webp",alt:"Gratuito",class:"custom-welcome__benefit-icon-img",loading:"lazy",decoding:"async"},null,-1)),t("span",null,n(e.t("page.custom.welcome.benefit1")),1)]),t("div",he,[s[4]||(s[4]=t("img",{src:"/assets/custom/icon-lightning.webp",alt:"Rápido",class:"custom-welcome__benefit-icon-img",loading:"lazy",decoding:"async"},null,-1)),t("span",null,n(e.t("page.custom.welcome.benefit2")),1)]),t("div",ve,[s[5]||(s[5]=t("img",{src:"/assets/custom/icon-sparkles.webp",alt:"Personalizado",class:"custom-welcome__benefit-icon-img",loading:"lazy",decoding:"async"},null,-1)),t("span",null,n(e.t("page.custom.welcome.benefit3")),1)])])])])}const ye=w(oe,[["render",Se],["__scopeId","data-v-a9374c7f"]]),be={__name:"CustomProgressBar",props:{currentStep:{type:Number,default:1},steps:{type:Array,default:()=>[{icon:"welcome",label:"Bienvenida"},{icon:"name",label:"Nombre"},{icon:"story",label:"Cuento"},{icon:"email",label:"Email"},{icon:"newsletter",label:"Newsletter"},{icon:"share",label:"Compartir"}]}},setup(o,{expose:s}){s();const e={props:o,computed:C};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},we={class:"custom-progress-bar"},Ce={class:"custom-progress-bar__container"},Ve={class:"custom-progress-bar__steps"},ke={class:"custom-progress-bar__step-icon"},De=["src","alt"],Ie={class:"custom-progress-bar__step-label"},xe={class:"custom-progress-bar__line"},Ae={class:"custom-progress-bar__percentage"};function Te(o,s,a,e,r,l){return i(),u("div",we,[t("div",Ce,[t("div",Ve,[(i(!0),u(T,null,B(a.steps,(c,d)=>(i(),u("div",{key:d,class:R(["custom-progress-bar__step",{"custom-progress-bar__step--active":a.currentStep===d,"custom-progress-bar__step--completed":a.currentStep>d}])},[t("div",ke,[t("img",{src:`/assets/custom/icon-${c.icon}.webp`,alt:c.label,class:"custom-progress-bar__icon-img",loading:"lazy",decoding:"async"},null,8,De)]),t("div",Ie,n(c.label),1)],2))),128))]),t("div",xe,[t("div",{class:"custom-progress-bar__line-fill",style:H({width:`${Math.max(0,a.currentStep/(a.steps.length-1)*100)}%`})},null,4)])]),t("div",Ae,n(Math.max(0,Math.round(a.currentStep/(a.steps.length-1)*100)))+"% ",1)])}const Be=w(be,[["render",Te],["__scopeId","data-v-5cce3c73"]]),Ee={__name:"CustomStepName",props:{modelValue:{type:String,default:""},secondaryCharacters:{type:Array,default:()=>[]}},emits:["update:modelValue","update:secondaryCharacters"],setup(o,{expose:s,emit:a}){s();const e=o,r=a,l=["Lucas","Elena","Milo","Sofía","Marco","Luna","Óscar","Ines"],c=C(()=>!e.modelValue),V={props:e,emit:r,suggestedNames:l,showSuggestions:c,addSecondary:()=>{e.secondaryCharacters.length<5&&r("update:secondaryCharacters",[...e.secondaryCharacters,""])},updateSecondary:(D,h)=>{const x=[...e.secondaryCharacters];x[D]=h,r("update:secondaryCharacters",x)},removeSecondary:D=>{const h=e.secondaryCharacters.filter((x,N)=>N!==D);r("update:secondaryCharacters",h)},computed:C,get t(){return f},get VInput(){return J}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}},Pe={class:"custom-step-name"},Me={class:"custom-step-name__image"},Ne={key:0,src:"/assets/custom/character-waiting.webp",alt:"Character waiting",class:"custom-step-name__img",loading:"lazy",decoding:"async"},Oe={key:1,src:"/assets/custom/character-alive.webp",alt:"Character with life",class:"custom-step-name__img custom-step-name__img--active",loading:"lazy",decoding:"async"},Re={class:"custom-step-name__form"},ze={class:"custom-step-name__title"},He={class:"custom-step-name__section"},Ue={class:"custom-step-name__section-label"},je={class:"custom-step-name__subtitle"},Fe={class:"custom-step-name__counter"},Le={class:"custom-step-name__counter-text"},Ye={class:"custom-step-name__counter-bar"},Ge={class:"custom-step-name__section custom-step-name__section--secondary"},We={class:"custom-step-name__section-label"},Je={class:"custom-step-name__secondary-list"},Ke=["onClick","aria-label"],Xe={key:0,class:"custom-step-name__suggestions"},Qe={class:"custom-step-name__suggestions-title"},Ze={class:"custom-step-name__suggestions-list"},qe=["onClick"],$e={key:0,class:"custom-step-name__preview"},et={class:"custom-step-name__preview-label"},tt={class:"custom-step-name__preview-name"};function st(o,s,a,e,r,l){return i(),u("div",Pe,[t("div",Me,[a.modelValue?(i(),u("img",Oe)):(i(),u("img",Ne))]),t("div",Re,[t("h2",ze,n(e.t("page.custom.input.name")),1),t("div",He,[t("p",Ue,n(e.t("page.custom.step.name.protagonist")),1),t("p",je,n(e.t("page.custom.step.name.subtitle")),1),m(e.VInput,{modelValue:a.modelValue,"onUpdate:modelValue":s[0]||(s[0]=c=>o.$emit("update:modelValue",c)),placeholder:e.t("page.custom.step.name.placeholder"),type:"text",maxlength:"50","aria-label":e.t("page.custom.input.name"),class:"custom-step-name__input"},null,8,["modelValue","placeholder","aria-label"]),t("div",Fe,[t("span",Le,n(a.modelValue.length)+" / 50 ",1),t("div",Ye,[t("div",{class:"custom-step-name__counter-fill",style:H({width:`${a.modelValue.length/50*100}%`})},null,4)])])]),t("div",Ge,[t("p",We,n(e.t("page.custom.step.name.secondary")),1),t("div",Je,[(i(!0),u(T,null,B(a.secondaryCharacters,(c,d)=>(i(),u("div",{key:d,class:"custom-step-name__character-input"},[m(e.VInput,{modelValue:c,"onUpdate:modelValue":S=>e.updateSecondary(d,S),placeholder:`Personaje secundario ${d+1}...`,maxlength:"50",class:"custom-step-name__input custom-step-name__input--secondary"},null,8,["modelValue","onUpdate:modelValue","placeholder"]),t("button",{onClick:S=>e.removeSecondary(d),class:"custom-step-name__remove-btn","aria-label":`Eliminar personaje ${d+1}`}," ✕ ",8,Ke)]))),128))]),a.secondaryCharacters.length<5?(i(),u("button",{key:0,onClick:e.addSecondary,class:"custom-step-name__add-btn"}," + "+n(e.t("page.custom.step.name.add")),1)):g("",!0)]),e.showSuggestions?(i(),u("div",Xe,[t("p",Qe,n(e.t("page.custom.step.name.suggestions")),1),t("div",Ze,[(i(),u(T,null,B(e.suggestedNames,c=>t("button",{key:c,onClick:d=>o.$emit("update:modelValue",c),class:"custom-step-name__suggestion-chip"},n(c),9,qe)),64))])])):g("",!0),m(U,{name:"fade"},{default:_(()=>[a.modelValue?(i(),u("div",$e,[t("p",et,n(e.t("page.custom.step.name.preview")),1),t("h3",tt,n(a.modelValue),1)])):g("",!0)]),_:1})])])}const ot=w(Ee,[["render",st],["__scopeId","data-v-ed972670"]]),at={__name:"CustomStepStory",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(o,{expose:s,emit:a}){s();const l={props:o,emit:a,computed:C,get t(){return f}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},nt={class:"custom-step-story"},ct={class:"custom-step-story__form"},rt={class:"custom-step-story__title"},lt={class:"custom-step-story__subtitle"},it=["modelValue","placeholder","aria-label"],ut={class:"custom-step-story__counter"},mt={class:"custom-step-story__counter-text"},dt={class:"custom-step-story__counter-bar"},_t={key:0,class:"custom-step-story__info"},pt={class:"custom-step-story__info-text"};function gt(o,s,a,e,r,l){return i(),u("div",nt,[s[3]||(s[3]=t("div",{class:"custom-step-story__image"},[t("img",{src:"/assets/custom/magic-book-writing.webp",alt:"Magic book writing",class:"custom-step-story__img",loading:"lazy",decoding:"async"})],-1)),t("div",ct,[t("h2",rt,[p(n(e.t("page.custom.input.story"))+" ",1),s[1]||(s[1]=t("span",{class:"custom-step-story__mandatory"},"*",-1))]),t("p",lt,n(e.t("page.custom.step.story.subtitle")),1),t("textarea",{modelValue:a.modelValue,onInput:s[0]||(s[0]=c=>o.$emit("update:modelValue",c.target.value)),placeholder:e.t("page.custom.step.story.placeholder"),maxlength:"2000",class:"custom-step-story__textarea","aria-label":e.t("page.custom.input.story")},null,40,it),t("div",ut,[t("span",mt,n(a.modelValue.length)+" / 2000 ",1),t("div",dt,[t("div",{class:"custom-step-story__counter-fill",style:H({width:`${a.modelValue.length/2e3*100}%`})},null,4)])]),a.modelValue?(i(),u("div",_t,[t("p",pt,[s[2]||(s[2]=t("img",{src:"/assets/custom/icon-check-circle.webp",alt:"Completado",class:"custom-step-story__info-icon-img",loading:"lazy",decoding:"async"},null,-1)),p(" "+n(e.t("page.custom.step.story.info")),1)])])):g("",!0)])])}const ft=w(at,[["render",gt],["__scopeId","data-v-1ddda75d"]]),ht={__name:"CustomStepEmail",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(o,{expose:s}){s();const a=o,e=C(()=>a.modelValue?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.modelValue):!1),r={props:a,isValidEmail:e,computed:C,get t(){return f},get VInput(){return J}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},vt={class:"custom-step-email"},St={class:"custom-step-email__form"},yt={class:"custom-step-email__title"},bt={class:"custom-step-email__subtitle"},wt={class:"custom-step-email__timeline"},Ct={class:"custom-step-email__timeline-title"},Vt={class:"custom-step-email__timeline-steps"},kt={class:"custom-step-email__timeline-item"},Dt={class:"custom-step-email__timeline-item"},It={class:"custom-step-email__timeline-item"},xt={class:"custom-step-email__timeline-note"};function At(o,s,a,e,r,l){return i(),u("div",vt,[s[4]||(s[4]=t("div",{class:"custom-step-email__image"},[t("img",{src:"/assets/custom/owl-messenger.webp",alt:"Owl messenger",class:"custom-step-email__img",loading:"lazy",decoding:"async"})],-1)),t("div",St,[t("h2",yt,n(e.t("page.custom.input.email")),1),t("p",bt,n(e.t("page.custom.step.email.subtitle")),1),m(e.VInput,{modelValue:a.modelValue,"onUpdate:modelValue":s[0]||(s[0]=c=>o.$emit("update:modelValue",c)),type:"email",placeholder:e.t("page.custom.input.email.placeholder"),"aria-label":e.t("page.custom.input.email"),class:"custom-step-email__input"},null,8,["modelValue","placeholder","aria-label"]),t("div",wt,[t("h3",Ct,n(e.t("page.custom.step.email.timeline")),1),t("div",Vt,[t("div",kt,[s[1]||(s[1]=t("div",{class:"custom-step-email__timeline-number"},"1",-1)),t("p",null,n(e.t("page.custom.step.email.timeline.1")),1)]),t("div",Dt,[s[2]||(s[2]=t("div",{class:"custom-step-email__timeline-number"},"2",-1)),t("p",null,n(e.t("page.custom.step.email.timeline.2")),1)]),t("div",It,[s[3]||(s[3]=t("div",{class:"custom-step-email__timeline-number"},"3",-1)),t("p",null,n(e.t("page.custom.step.email.timeline.3")),1)])]),t("p",xt,n(e.t("page.custom.step.email.timeline.note")),1)])])])}const Tt=w(ht,[["render",At],["__scopeId","data-v-bf9c3039"]]),Bt={__name:"CustomStepNewsletter",props:{modelValue:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(o,{expose:s}){s();const a={get t(){return f}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},Et={class:"custom-step-newsletter"},Pt={class:"custom-step-newsletter__form"},Mt={class:"custom-step-newsletter__title"},Nt={class:"custom-step-newsletter__subtitle"},Ot={class:"custom-step-newsletter__card"},Rt={class:"custom-step-newsletter__card-title"},zt={class:"custom-step-newsletter__benefits"},Ht={class:"custom-step-newsletter__options"},Ut={class:"custom-step-newsletter__option-radio"},jt={key:0,class:"custom-step-newsletter__option-radio-inner"},Ft={class:"custom-step-newsletter__option-label"},Lt={class:"custom-step-newsletter__option-radio"},Yt={key:0,class:"custom-step-newsletter__option-radio-inner"},Gt={class:"custom-step-newsletter__option-label"},Wt={class:"custom-step-newsletter__disclaimer"};function Jt(o,s,a,e,r,l){return i(),u("div",Et,[s[2]||(s[2]=t("div",{class:"custom-step-newsletter__image"},[t("img",{src:"/assets/custom/treasure-newsletter.webp",alt:"Treasure newsletter",class:"custom-step-newsletter__img",loading:"lazy",decoding:"async"})],-1)),t("div",Pt,[t("h2",Mt,n(e.t("page.custom.input.newsletter")),1),t("p",Nt,n(e.t("page.custom.step.newsletter.subtitle")),1),t("div",Ot,[t("h3",Rt,n(e.t("page.custom.step.newsletter.title")),1),t("ul",zt,[t("li",null,n(e.t("page.custom.step.newsletter.benefit1")),1),t("li",null,n(e.t("page.custom.step.newsletter.benefit2")),1),t("li",null,n(e.t("page.custom.step.newsletter.benefit3")),1),t("li",null,n(e.t("page.custom.step.newsletter.benefit4")),1)])]),t("div",Ht,[t("button",{class:R(["custom-step-newsletter__option",{"custom-step-newsletter__option--active":a.modelValue===!0}]),onClick:s[0]||(s[0]=c=>o.$emit("update:modelValue",!0))},[t("span",Ut,[a.modelValue===!0?(i(),u("span",jt)):g("",!0)]),t("span",Ft,n(e.t("page.custom.button.accept")),1)],2),t("button",{class:R(["custom-step-newsletter__option",{"custom-step-newsletter__option--active":a.modelValue===!1}]),onClick:s[1]||(s[1]=c=>o.$emit("update:modelValue",!1))},[t("span",Lt,[a.modelValue===!1?(i(),u("span",Yt)):g("",!0)]),t("span",Gt,n(e.t("page.custom.button.decline")),1)],2)]),t("p",Wt,n(e.t("page.custom.step.newsletter.disclaimer")),1)])])}const Kt=w(Bt,[["render",Jt],["__scopeId","data-v-d4cce495"]]),Xt={__name:"CustomShareGate",props:{mainPageUrl:{type:String,default:"/"},shareCount:{type:Number,default:0},hasShared:{type:Boolean,default:!1}},emits:["share-success","proceed"],setup(o,{expose:s,emit:a}){s();const e=o,r=a,l=C(()=>f("page.custom.sharegate.shareText")),S={props:e,emit:r,shareTitle:l,onShareSuccess:()=>{r("share-success")},goToStories:()=>{window.location.href=E()},ref:v,computed:C,onMounted:I,get t(){return f},get VButton(){return M},SocialShare:se,get toStories(){return E}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}},Qt={class:"custom-share-gate"},Zt={class:"custom-share-gate__container"},qt={class:"custom-share-gate__animation"},$t={class:"custom-share-gate__stars"},es={class:"custom-share-gate__title"},ts={class:"custom-share-gate__description"},ss={class:"custom-share-gate__options"},os={class:"custom-share-gate__option"},as={class:"custom-share-gate__option-title"},ns={class:"custom-share-gate__divider"},cs={class:"custom-share-gate__option"},rs={class:"custom-share-gate__option-title"},ls={class:"custom-share-gate__option-description"},is={class:"custom-share-gate__stats"},us={class:"custom-share-gate__stat"},ms={class:"custom-share-gate__stat-number"},ds={class:"custom-share-gate__stat-label"},_s={class:"custom-share-gate__stat"},ps={class:"custom-share-gate__stat-label"},gs={key:0,class:"custom-share-gate__success"},fs={class:"custom-share-gate__success-text"};function hs(o,s,a,e,r,l){return i(),u("div",Qt,[t("div",Zt,[t("div",qt,[s[1]||(s[1]=t("img",{src:"/assets/custom/icon-lock.webp",alt:"Compartir",class:"custom-share-gate__icon",loading:"lazy",decoding:"async"},null,-1)),t("div",$t,[(i(),u(T,null,B(5,c=>t("img",{key:c,src:"/assets/custom/icon-sparkles.webp",alt:"Chispa",class:"custom-share-gate__star",loading:"lazy",decoding:"async"})),64))])]),t("h2",es,n(e.t("page.custom.sharegate.title")),1),t("p",ts,n(e.t("page.custom.sharegate.description")),1),t("div",ss,[t("div",os,[t("h3",as,n(e.t("page.custom.sharegate.option1")),1),m(e.SocialShare,{url:a.mainPageUrl,title:e.shareTitle,label:!1,onShare:e.onShareSuccess,class:"custom-share-gate__share-buttons"},null,8,["url","title"])]),t("div",ns,[t("span",null,n(e.t("page.custom.sharegate.or")),1)]),t("div",cs,[t("h3",rs,n(e.t("page.custom.sharegate.option2")),1),t("p",ls,n(e.t("page.custom.sharegate.option2.description")),1),m(e.VButton,{onClick:e.goToStories,variant:"secondary",class:"custom-share-gate__button"},{default:_(()=>[p(n(e.t("page.custom.sharegate.exploreStories"))+" → ",1)]),_:1})])]),t("div",is,[t("div",us,[t("div",ms,n(a.shareCount),1),t("div",ds,n(e.t("page.custom.sharegate.timesShared")),1)]),t("div",_s,[s[2]||(s[2]=t("img",{src:"/assets/custom/icon-pin.webp",alt:"Personas",class:"custom-share-gate__stat-icon",loading:"lazy",decoding:"async"},null,-1)),t("div",ps,n(e.t("page.custom.sharegate.helped")),1)])]),a.hasShared?(i(),u("div",gs,[s[3]||(s[3]=t("img",{src:"/assets/custom/icon-sparkles.webp",alt:"Éxito",class:"custom-share-gate__success-icon",loading:"lazy",decoding:"async"},null,-1)),t("p",fs,n(e.t("page.custom.sharegate.success")),1),m(e.VButton,{onClick:s[0]||(s[0]=c=>o.$emit("proceed")),class:"custom-share-gate__success-button"},{default:_(()=>[p(n(e.t("page.custom.sharegate.continue")),1)]),_:1})])):g("",!0)])])}const vs=w(Xt,[["render",hs],["__scopeId","data-v-1ca6c21c"]]),Ss={__name:"CustomSuccess",setup(o,{expose:s}){s();const r={goHome:()=>{window.location.href="/"},goStories:()=>{window.location.href=E()},get t(){return f},get VButton(){return M},get toStories(){return E}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},ys={class:"custom-success"},bs={class:"custom-success__animation"},ws={class:"custom-success__confetti"},Cs={class:"custom-success__content"},Vs={class:"custom-success__title"},ks={class:"custom-success__subtitle"},Ds={class:"custom-success__info"},Is={class:"custom-success__info-text"},xs={class:"custom-success__actions"},As={class:"custom-success__footer"};function Ts(o,s,a,e,r,l){return i(),u("div",ys,[t("div",bs,[s[0]||(s[0]=t("img",{src:"/assets/custom/success-celebration.webp",alt:"Success celebration",class:"custom-success__image",loading:"lazy",decoding:"async"},null,-1)),t("div",ws,[(i(),u(T,null,B(20,c=>t("img",{key:c,src:"/assets/custom/icon-sparkles.webp",alt:"Celebración",class:"custom-success__confetti-piece",loading:"lazy",decoding:"async"})),64))])]),t("div",Cs,[t("h2",Vs,n(e.t("page.custom.button.success")),1),t("p",ks,n(e.t("page.custom.success.message")),1),t("div",Ds,[s[1]||(s[1]=t("img",{src:"/assets/custom/icon-email-outline.webp",alt:"Email",class:"custom-success__info-icon",loading:"lazy",decoding:"async"},null,-1)),t("p",Is,n(e.t("page.custom.success.email")),1)]),t("div",xs,[m(e.VButton,{onClick:e.goHome,class:"custom-success__button"},{default:_(()=>[p(n(e.t("page.custom.success.home")),1)]),_:1}),m(e.VButton,{onClick:e.goStories,variant:"secondary",class:"custom-success__button"},{default:_(()=>[p(n(e.t("page.custom.success.explore")),1)]),_:1})]),t("p",As,n(e.t("page.custom.success.footer")),1)])])}const Bs=w(Ss,[["render",Ts],["__scopeId","data-v-f1cb68ff"]]),Es={__name:"CustomDraftBanner",props:{hasDraft:{type:Boolean,default:!1},draftInfo:{type:Object,default:()=>({lastModified:"",progress:0})}},emits:["load","discard","close"],setup(o,{expose:s,emit:a}){s();const e=o,r=a,l=v(!0),c=()=>{l.value=!1,r("load")},d=()=>{l.value=!1,r("discard")},S=()=>{l.value=!1,r("close")};I(()=>{e.hasDraft||(l.value=!1)});const y={props:e,emit:r,showBanner:l,onLoadDraft:c,onDiscardDraft:d,closeBanner:S,ref:v,onMounted:I,get t(){return f}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},Ps={key:0,class:"custom-draft-banner"},Ms={class:"custom-draft-banner__content"},Ns={class:"custom-draft-banner__info"},Os={class:"custom-draft-banner__title"},Rs={class:"custom-draft-banner__details"},zs={class:"custom-draft-banner__progress"},Hs={class:"custom-draft-banner__actions"},Us=["aria-label"];function js(o,s,a,e,r,l){return i(),A(U,{name:"custom-draft-banner-slide"},{default:_(()=>[e.showBanner&&a.hasDraft?(i(),u("div",Ps,[t("div",Ms,[s[0]||(s[0]=t("div",{class:"custom-draft-banner__icon"},"📝",-1)),t("div",Ns,[t("p",Os,n(e.t("page.custom.draft.saved")),1),t("p",Rs,[p(n(a.draftInfo.lastModified)+" ",1),t("span",zs," ("+n(a.draftInfo.progress)+"% completado) ",1)])])]),t("div",Hs,[t("button",{class:"custom-draft-banner__button custom-draft-banner__button--primary",onClick:e.onLoadDraft},n(e.t("page.custom.draft.continue")),1),t("button",{class:"custom-draft-banner__button custom-draft-banner__button--secondary",onClick:e.onDiscardDraft},n(e.t("page.custom.draft.discard")),1)]),t("button",{class:"custom-draft-banner__close",onClick:e.closeBanner,"aria-label":e.t("page.custom.draft.close")}," ✕ ",8,Us)])):g("",!0)]),_:1})}const Fs=w(Es,[["render",js],["__scopeId","data-v-207bf26a"]]),Ls={__name:"CustomSavingIndicator",props:{isSaving:{type:Boolean,default:!1}},setup(o,{expose:s}){s();const a=o,e=C(()=>f("page.custom.saving")),r={props:a,saveText:e,computed:C,get t(){return f}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},Ys={key:0,class:"custom-saving-indicator"},Gs={class:"custom-saving-indicator__text"};function Ws(o,s,a,e,r,l){return i(),A(U,{name:"custom-saving-fade",mode:"out-in"},{default:_(()=>[a.isSaving?(i(),u("div",Ys,[s[0]||(s[0]=t("div",{class:"custom-saving-indicator__dots"},[t("span"),t("span"),t("span")],-1)),t("span",Gs,n(e.saveText),1)])):g("",!0)]),_:1})}const Js=w(Ls,[["render",Ws],["__scopeId","data-v-43596487"]]),P={DRAFT:"customStory:draft",DRAFT_TIMESTAMP:"customStory:draftTimestamp",DRAFT_EXPIRY_DAYS:30},Ks=o=>{try{const s={name:o.name||"",story:o.story||"",email:o.email||"",receiveAll:o.receiveAll!==void 0?o.receiveAll:!0,currentStep:o.currentStep||1,lastModified:new Date().toISOString()};return localStorage.setItem(P.DRAFT,JSON.stringify(s)),!0}catch(s){return console.error("Error saving draft:",s),!1}},j=()=>{try{const o=localStorage.getItem(P.DRAFT);if(!o)return null;const s=JSON.parse(o);if(s.lastModified){const a=new Date(s.lastModified);if((new Date-a)/(1e3*60*60*24)>P.DRAFT_EXPIRY_DAYS)return z(),null}return s}catch(o){return console.error("Error retrieving draft:",o),null}},z=()=>{try{return localStorage.removeItem(P.DRAFT),!0}catch(o){return console.error("Error clearing draft:",o),!1}},Xs=()=>{const o=j();return o!==null&&(o.name||o.story||o.email)},Y=()=>{const o=j();if(!o)return{exists:!1,lastModified:null,progress:0};const s=new Date(o.lastModified),e=Math.round((new Date-s)/(1e3*60));let r="hace poco";e>60?r=`hace ${Math.round(e/60)}h`:e>1&&(r=`hace ${e}m`);let l=0;return o.name&&(l+=25),o.story&&(l+=35),o.email&&(l+=25),o.receiveAll!==void 0&&(l+=15),{exists:!0,lastModified:r,progress:Math.min(l,100),currentStep:o.currentStep||1}};function G(o){const s=v(!1),a=v(!1),e=v({}),r=v(!1);let l;const c=()=>{r.value=!0,clearTimeout(l),l=setTimeout(()=>{Ks(o.value)&&setTimeout(()=>{r.value=!1},500)},1e3)},d=()=>{const h=j();return h&&(Object.assign(o.value,{name:h.name||"",story:h.story||"",email:h.email||"",receiveAll:h.receiveAll!==void 0?h.receiveAll:!0,currentStep:h.currentStep||1}),s.value=!0,a.value=!0),h},S=()=>{z(),a.value=!1,Object.assign(o.value,{name:"",story:"",email:"",receiveAll:!0,currentStep:1})},y=()=>Y(),V=()=>{const h=Xs();return a.value=h,e.value=Y(),h},D=()=>{z(),a.value=!1};return I(()=>{V()}),te(()=>o.value,()=>{s.value&&c()},{deep:!0}),{isDraftLoaded:s,hasSavedDraft:a,draftInfo:e,isSaving:r,autoSave:c,loadDraft:d,discardDraft:S,checkForDraft:V,getInfo:y,removeDraft:D}}const k={HAS_SHARED:"customStory:hasShared",SHARE_TIMESTAMP:"customStory:shareTimestamp",SHARES_COUNT:"customStory:sharesCount",LAST_SUBMISSION:"customStory:lastSubmission"},Qs=()=>{try{const o=new Date().toISOString();localStorage.setItem(k.HAS_SHARED,"true"),localStorage.setItem(k.SHARE_TIMESTAMP,o);const s=parseInt(localStorage.getItem(k.SHARES_COUNT)||"0");return localStorage.setItem(k.SHARES_COUNT,String(s+1)),!0}catch(o){return console.error("Error marking as shared:",o),!1}},Zs=()=>{try{return localStorage.getItem(k.HAS_SHARED)==="true"}catch(o){return console.error("Error checking if user shared:",o),!1}},qs=()=>{try{return localStorage.setItem(k.HAS_SHARED,"false"),localStorage.setItem(k.LAST_SUBMISSION,new Date().toISOString()),!0}catch(o){return console.error("Error resetting share state:",o),!1}},$s=()=>{try{const o=Zs(),s=parseInt(localStorage.getItem(k.SHARES_COUNT)||"0"),a=localStorage.getItem(k.SHARE_TIMESTAMP);return{hasShared:o,sharesCount:s,timestamp:a,canProceed:o}}catch(o){return console.error("Error getting share info:",o),{hasShared:!1,sharesCount:0,timestamp:null,canProceed:!1}}};function W(){const o=v(!1),s=v({}),a=v(!1),e=()=>{Qs(),a.value=!0,o.value=!0},r=()=>{qs(),a.value=!1,o.value=!1},l=()=>{const d=$s();return a.value=d.hasShared,o.value=d.canProceed,s.value=d,o.value},c=()=>s.value;return I(()=>{l()}),{canProceed:o,shareInfo:s,hasShared:a,onShareSuccess:e,resetShare:r,checkShareStatus:l,getInfo:c}}const eo="/",to={__name:"CustomPage",setup(o,{expose:s}){s();const a="https://script.google.com/macros/s/AKfycbyf8f9poDw0Jh26Ieniy0eYZELfDpXwHlC43BWqihDzBCkmExaVhFELYQ2og72CCZHM/exec",e="es",r=v(0),l=v({name:"",secondaryCharacters:[],story:"",email:"",receiveAll:!0,currentStep:0}),c=v(!1),d=v(!1),S=v(!1),y=G(l),V=W(),D=[{icon:"welcome",label:"Bienvenida"},{icon:"name",label:"Nombre"},{icon:"story",label:"Cuento"},{icon:"email",label:"Email"},{icon:"newsletter",label:"Newsletter"},{icon:"share",label:"Compartir"},{icon:"success",label:"Éxito"}],h=b=>b?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b):!1,x=()=>{r.value<D.length-1&&(r.value++,l.value.currentStep=r.value,y.autoSave())},N=()=>{r.value>0&&(r.value--,l.value.currentStep=r.value,y.autoSave())},K=()=>{V.onShareSuccess()},X=()=>{y.loadDraft(),r.value=l.value.currentStep||1},Q=()=>{y.discardDraft(),r.value=1},Z=async()=>{x(),c.value=!0,d.value=!1,S.value=!1;try{const b={...l.value};if(b.secondaryCharacters&&b.secondaryCharacters.length>0){const O=[b.name,...b.secondaryCharacters.filter(q=>q.trim())];b.name=O.join(", ")}const L=await fetch("https://script.google.com/macros/s/AKfycbyXxWrBmQDXCDIg5v-bc4YnkDU5YHu43a8HeGVNdoknYDK50bBnLg9gcAbP4Myw14lr/exec",{method:"POST",body:JSON.stringify(b),headers:{"Content-Type":"text/plain;charset=utf-8"}});if(l.value.receiveAll)try{await fetch(a,{method:"POST",body:JSON.stringify({email:l.value.email,lang:e,story:!0}),headers:{"Content-Type":"text/plain;charset=utf-8"}})}catch(O){console.error("Newsletter error:",O)}L.ok?(d.value=!0,y.removeDraft(),V.resetShare()):S.value=!0}catch(b){console.error("Form submission error:",b),S.value=!0}finally{c.value=!1}};I(()=>{y.hasSavedDraft.value});const F={newsletterEndpoint:a,lang:e,mainPageUrl:eo,currentStep:r,form:l,loading:c,successMessage:d,errorMessage:S,draft:y,shareTracking:V,progressSteps:D,isValidEmail:h,nextStep:x,prevStep:N,handleShareSuccess:K,handleLoadDraft:X,handleDiscardDraft:Q,submitForm:Z,get t(){return f},ref:v,onMounted:I,get VButton(){return M},get VContainer(){return ee},get VText(){return $},CustomWelcome:ye,CustomProgressBar:Be,CustomStepName:ot,CustomStepStory:ft,CustomStepEmail:Tt,CustomStepNewsletter:Kt,CustomShareGate:vs,CustomSuccess:Bs,CustomDraftBanner:Fs,CustomSavingIndicator:Js,get useCustomDraft(){return G},get useShareTracking(){return W}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}},so={key:2,class:"custom-page-step"},oo={class:"custom-page-step__buttons"},ao={key:3,class:"custom-page-step"},no={class:"custom-page-step__buttons"},co={key:4,class:"custom-page-step"},ro={class:"custom-page-step__buttons"},lo={key:5,class:"custom-page-step"},io={class:"custom-page-step__buttons"},uo={key:6,class:"custom-page-step"},mo={key:7,class:"custom-page-step"},_o={key:1,class:"custom-page-loader"},po={key:2,class:"custom-page-error-message"};function go(o,s,a,e,r,l){return i(),A(e.VContainer,{size:"xs",class:"custom-page"},{default:_(()=>[e.currentStep===0&&e.draft.hasSavedDraft.value?(i(),A(e.CustomDraftBanner,{key:0,"has-draft":e.draft.hasSavedDraft.value,"draft-info":e.draft.getInfo(),onLoad:e.handleLoadDraft,onDiscard:e.handleDiscardDraft,onClose:()=>{}},null,8,["has-draft","draft-info"])):g("",!0),m(e.CustomSavingIndicator,{"is-saving":e.draft.isSaving.value},null,8,["is-saving"]),m(e.CustomProgressBar,{"current-step":e.currentStep,steps:e.progressSteps},null,8,["current-step"]),e.currentStep===0?(i(),A(e.CustomWelcome,{key:1,onStart:e.nextStep})):g("",!0),e.currentStep===1?(i(),u("div",so,[m(e.CustomStepName,{modelValue:e.form.name,"onUpdate:modelValue":[s[0]||(s[0]=c=>e.form.name=c),s[1]||(s[1]=c=>e.form.name=c)],secondaryCharacters:e.form.secondaryCharacters,"onUpdate:secondaryCharacters":s[2]||(s[2]=c=>e.form.secondaryCharacters=c)},null,8,["modelValue","secondaryCharacters"]),t("div",oo,[m(e.VButton,{onClick:e.prevStep,variant:"secondary"},{default:_(()=>[p(n(e.t("page.custom.button.prev")),1)]),_:1}),m(e.VButton,{onClick:e.nextStep,disabled:!e.form.name,variant:"primary"},{default:_(()=>[p(n(e.t("page.custom.button.next")),1)]),_:1},8,["disabled"])])])):g("",!0),e.currentStep===2?(i(),u("div",ao,[m(e.CustomStepStory,{modelValue:e.form.story,"onUpdate:modelValue":s[3]||(s[3]=c=>e.form.story=c)},null,8,["modelValue"]),t("div",no,[m(e.VButton,{onClick:e.prevStep,variant:"secondary"},{default:_(()=>[p(n(e.t("page.custom.button.prev")),1)]),_:1}),m(e.VButton,{onClick:e.nextStep,disabled:!e.form.story,variant:"primary"},{default:_(()=>[p(n(e.t("page.custom.button.next")),1)]),_:1},8,["disabled"])])])):g("",!0),e.currentStep===3?(i(),u("div",co,[m(e.CustomStepEmail,{modelValue:e.form.email,"onUpdate:modelValue":s[4]||(s[4]=c=>e.form.email=c)},null,8,["modelValue"]),t("div",ro,[m(e.VButton,{onClick:e.prevStep,variant:"secondary"},{default:_(()=>[p(n(e.t("page.custom.button.prev")),1)]),_:1}),m(e.VButton,{onClick:e.nextStep,disabled:!e.isValidEmail(e.form.email),variant:"primary"},{default:_(()=>[p(n(e.t("page.custom.button.next")),1)]),_:1},8,["disabled"])])])):g("",!0),e.currentStep===4?(i(),u("div",lo,[m(e.CustomStepNewsletter,{modelValue:e.form.receiveAll,"onUpdate:modelValue":s[5]||(s[5]=c=>e.form.receiveAll=c)},null,8,["modelValue"]),t("div",io,[m(e.VButton,{onClick:e.prevStep,variant:"secondary"},{default:_(()=>[p(n(e.t("page.custom.button.prev")),1)]),_:1}),m(e.VButton,{onClick:e.nextStep,variant:"primary"},{default:_(()=>[p(n(e.t("page.custom.button.next")),1)]),_:1})])])):g("",!0),e.currentStep===5?(i(),u("div",uo,[m(e.CustomShareGate,{"has-shared":e.shareTracking.canProceed.value,"share-count":e.shareTracking.shareInfo.value.sharesCount,"main-page-url":e.mainPageUrl,onShareSuccess:e.handleShareSuccess,onProceed:e.submitForm},null,8,["has-shared","share-count"])])):g("",!0),e.currentStep===6?(i(),u("div",mo,[!e.loading&&e.successMessage?(i(),A(e.CustomSuccess,{key:0})):g("",!0),e.loading?(i(),u("div",_o,[s[6]||(s[6]=t("div",{class:"magic-spinner"},[t("div",{class:"magic-spinner__wand"})],-1)),m(e.VText,null,{default:_(()=>[p(n(e.t("page.custom.button.loading")),1)]),_:1})])):g("",!0),e.errorMessage&&!e.loading?(i(),u("div",po,[m(e.VText,null,{default:_(()=>[p(n(e.t("page.custom.button.error")),1)]),_:1}),m(e.VButton,{onClick:e.prevStep,style:{"margin-top":"var(--v-unit-4)"}},{default:_(()=>[p(n(e.t("page.custom.button.prev")),1)]),_:1})])):g("",!0)])):g("",!0)]),_:1})}const ko=w(to,[["render",go],["__scopeId","data-v-187d1ed3"]]);export{ko as default};
