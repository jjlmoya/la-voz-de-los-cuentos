import{t as m}from"./index.C6LzL3Qw.js";import{_ as k,I as b,g as F,w as Q,A as q}from"./_plugin-vue_export-helper.DrVY87Ov.js";import{u as B,B as U}from"./Basic.WlJibyC3.js";import{b as E}from"./index.DIhC7bAX.js";/* empty css                           */import{o as n,c as x,b as l,w as i,f as c,t as d,p as G,k as S,g as v,h as T,q as H,e as w,l as D,a as V,F as L,r as A,d as C}from"./runtime-dom.esm-bundler.5IqPX93W.js";import{u as N}from"./useStories.Bnc-iv0Q.js";import"./index.BAeavcBF.js";import"./landings.YEmIAFX9.js";/* empty css                      */const J={__name:"Plain",props:{story:{type:Object,default:{}}},setup(g,{expose:t}){t();const r=g,{getTime:e,getSaga:o}=B(r.story),s=e(),a=o(),_={props:r,getTime:e,getSaga:o,time:s,saga:a,get toStory(){return E},get VText(){return b},get useStory(){return B}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},K=["href"];function R(g,t,r,e,o,s){return n(),x("a",{class:"plain-card",href:e.toStory(r.story.key)},[l(e.VText,{ellipsis:"",class:"plain-card__element"},{default:i(()=>[c(d(r.story.name),1)]),_:1}),l(e.VText,{ellipsis:"",class:"plain-card__element"},{default:i(()=>[c(d(e.saga),1)]),_:1}),l(e.VText,{ellipsis:"",class:"plain-card__element"},{default:i(()=>[c(d(e.time),1)]),_:1})],8,K)}const W=k(J,[["render",R],["__scopeId","data-v-ad90a6a8"]]),X={__name:"ListIcon",props:{active:{type:Boolean,default:!1}},setup(g,{expose:t}){t();const r={};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}};function Y(g,t,r,e,o,s){return n(),x("svg",{class:S(["list-icon",{"list-icon--active":r.active}]),xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 256 256","enable-background":"new 0 0 256 256","xml:space":"preserve"},t[0]||(t[0]=[G('<g data-v-4d881601><g data-v-4d881601><path d="M232.1,198.4L232.1,198.4L232.1,198.4L232.1,198.4z" data-v-4d881601></path><path d="M81.1,24.9H25.2c-8.4,0-15.2,6.8-15.2,15.2v55.9c0,8.4,6.8,15.2,15.2,15.2h55.9c8.4,0,15.2-6.8,15.2-15.2V40.2C96.4,31.8,89.5,24.9,81.1,24.9 M81.8,40.2v55.9c0,0.4-0.3,0.7-0.7,0.7H25.3c-0.4,0-0.7-0.3-0.7-0.7V40.2c0-0.4,0.3-0.7,0.7-0.7h55.9C81.5,39.5,81.8,39.8,81.8,40.2" data-v-4d881601></path><path d="M81.1,144.7H25.2c-8.4,0-15.2,6.8-15.2,15.2v55.9c0,8.4,6.8,15.2,15.2,15.2h55.9c8.4,0,15.2-6.8,15.2-15.2v-55.9C96.4,151.5,89.5,144.7,81.1,144.7 M81.8,159.9v55.9c0,0.4-0.3,0.7-0.7,0.7H25.3c-0.4,0-0.7-0.3-0.7-0.7v-55.9c0-0.4,0.3-0.7,0.7-0.7h55.9C81.5,159.2,81.8,159.5,81.8,159.9" data-v-4d881601></path><path d="M130.3,45.2c0.2,0.1,0.5,0.2,0.7,0.2h0.5c0.1,0,0.3,0,0.4,0h106c0.1,0,0.1,0,0.2,0c0.1,0,0.1,0,0.2,0h0.4c0.2,0,0.4-0.1,0.6-0.2c3.5-0.6,6-3.6,6-7.1c0-3.4-2.5-6.4-5.9-7c-0.2-0.2-0.5-0.3-0.8-0.3H131c-0.3,0-0.5,0.1-0.7,0.3c-3.3,0.7-5.8,3.6-5.8,7C124.5,41.6,126.9,44.5,130.3,45.2" data-v-4d881601></path><path d="M130.2,99c0.2,0.2,0.5,0.3,0.8,0.3h107.8c0.3,0,0.5-0.1,0.7-0.3c3.4-0.6,5.9-3.6,5.9-7c0-3.5-2.6-6.5-6-7.1c-0.2-0.1-0.4-0.2-0.6-0.2l-0.2,0c-0.2,0-0.4,0-0.7,0l-105.8,0c-0.2,0-0.4,0-0.7,0H131c-0.2,0-0.4,0.1-0.7,0.2c-3.4,0.7-5.9,3.6-5.9,7C124.5,95.4,126.9,98.3,130.2,99" data-v-4d881601></path><path d="M130.2,170.9c0.2,0.2,0.5,0.3,0.8,0.3h107.8c0.1,0,0.2,0,0.3,0c3.8-0.2,6.9-3.3,6.9-7.3c0-4-3.3-7.3-7.3-7.3c0,0-0.1,0-0.2,0H131.9c-0.1,0-0.2,0-0.4,0H131c-0.2,0-0.5,0.1-0.7,0.2c-3.4,0.7-5.9,3.6-5.9,7C124.5,167.3,126.9,170.1,130.2,170.9" data-v-4d881601></path><path d="M239.2,204.6c-0.1,0-0.3-0.1-0.5-0.1H131c-0.3,0-0.6,0.1-0.7,0.3c-3.3,0.7-5.8,3.6-5.8,7c0,3.4,2.5,6.4,5.9,7c0.2,0.1,0.4,0.2,0.6,0.2l0.2,0c0.1,0,0.2,0,0.7,0l106.3,0c0.1,0,0.4,0.1,0.5,0.1c4,0,7.3-3.3,7.3-7.3C246,208,243,204.9,239.2,204.6" data-v-4d881601></path></g></g>',1)]),2)}const Z=k(X,[["render",Y],["__scopeId","data-v-4d881601"]]),$={__name:"LoadingMessage",props:{messages:{type:Array,default:()=>[m("loading.adventure"),m("loading.book"),m("loading.characters"),m("loading.worlds"),m("loading.potions"),m("loading.treasures")]},interval:{type:Number,default:2e3}},setup(g,{expose:t}){t();const r=g,e=v(r.messages[0]);let o=null,s=0;const a=()=>{s=(s+1)%r.messages.length,e.value=r.messages[s]};T(()=>{r.messages.length>1&&(o=setInterval(a,r.interval))}),H(()=>{o&&clearInterval(o)});const _={props:r,currentMessage:e,get messageInterval(){return o},set messageInterval(f){o=f},get currentIndex(){return s},set currentIndex(f){s=f},rotateMessage:a,ref:v,onMounted:T,onUnmounted:H,get VText(){return b},get t(){return m}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},ee={class:"loading-message"};function te(g,t,r,e,o,s){return n(),x("div",ee,[t[0]||(t[0]=w("div",{class:"loading-spinner"},[w("div",{class:"loading-dots"},[w("span"),w("span"),w("span")])],-1)),l(e.VText,{class:"loading-message__text",variant:"header",color:"primary"},{default:i(()=>[c(d(e.currentMessage),1)]),_:1})])}const ae=k($,[["render",te],["__scopeId","data-v-9aed941f"]]),re={__name:"FilteredStories",setup(g,{expose:t}){t();const{getAllStories:r}=N(),e=r(),o=v(""),s=v("date"),a=v("desc"),_=v(!1),f=v(!1),P=u=>{f.value=!0,s.value===u?M():s.value=u,setTimeout(()=>{f.value=!1},1e3)},M=()=>{a.value=a.value==="asc"?"desc":"asc"},j=()=>{_.value=!_.value},I=u=>{const[p,h,y]=u.split("/").map(Number);return new Date(y,h-1,p)},z=D(()=>{let u=e;if(o.value){const p=o.value.toLowerCase();u=u.filter(h=>h.name.toLowerCase().includes(p))}return u.slice().sort((p,h)=>{let y=0;return s.value==="date"?y=I(p.date)-I(h.date):s.value==="time"?y=parseInt(p.time)-parseInt(h.time):s.value==="name"&&(y=p.name.localeCompare(h.name)),a.value==="asc"?y:-y})}),O={getAllStories:r,stories:e,searchQuery:o,sortOrder:s,sortDirection:a,isListView:_,isLoading:f,setSortOrder:P,toggleSortDirection:M,toggleViewMode:j,parseDate:I,filteredAndSortedStories:z,get t(){return m},get VContainer(){return F},get VButton(){return Q},get VText(){return b},get VInput(){return q},ref:v,computed:D,BasicCard:U,PlainCard:W,ListIcon:Z,LoadingMessage:ae,get useStories(){return N}};return Object.defineProperty(O,"__isScriptSetup",{enumerable:!1,value:!0}),O}},se={class:"sections-filtered"};function oe(g,t,r,e,o,s){return n(),x("div",se,[l(e.VContainer,{class:"sections-filtered__search-bar",size:"xs"},{default:i(()=>[l(e.VInput,{type:"text",modelValue:e.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=a=>e.searchQuery=a),placeholder:e.t("page.stories.searcher.placeholder"),class:"search-input"},null,8,["modelValue","placeholder"])]),_:1}),l(e.VContainer,{class:"sections-filtered__bar",size:"xs"},{default:i(()=>[l(e.VButton,{variant:"ghost",class:S({active:e.sortOrder==="date"}),onClick:t[1]||(t[1]=a=>e.setSortOrder("date"))},{default:i(()=>[c(d(e.t("page.stories.order.date"))+" ",1),e.sortOrder==="date"?(n(),V(e.VText,{key:0,color:"high"},{default:i(()=>[c(d(e.sortDirection==="asc"?"▲":"▼"),1)]),_:1})):C("",!0)]),_:1},8,["class"]),l(e.VButton,{variant:"ghost",class:S({active:e.sortOrder==="time"}),onClick:t[2]||(t[2]=a=>e.setSortOrder("time"))},{default:i(()=>[c(d(e.t("page.stories.order.duration"))+" ",1),e.sortOrder==="time"?(n(),V(e.VText,{key:0,color:"high"},{default:i(()=>[c(d(e.sortDirection==="asc"?"▲":"▼"),1)]),_:1})):C("",!0)]),_:1},8,["class"]),l(e.VButton,{variant:"ghost",class:S({active:e.sortOrder==="name"}),onClick:t[3]||(t[3]=a=>e.setSortOrder("name"))},{default:i(()=>[c(d(e.t("page.stories.order.name"))+" ",1),e.sortOrder==="name"?(n(),V(e.VText,{key:0,color:"high"},{default:i(()=>[c(d(e.sortDirection==="asc"?"▲":"▼"),1)]),_:1})):C("",!0)]),_:1},8,["class"]),l(e.VButton,{"aria-label":e.t("page.stories.changeview"),variant:"ghost",class:S({active:e.isListView}),onClick:e.toggleViewMode},{default:i(()=>[l(e.ListIcon,{active:!e.isListView},null,8,["active"])]),_:1},8,["aria-label","class"])]),_:1}),w("div",{class:S(["sections-filtered__content",{"list-view":e.isListView}])},[e.isLoading?(n(),V(e.LoadingMessage,{key:0,messages:[e.t("loading.adventure"),e.t("loading.book"),e.t("loading.characters"),e.t("loading.worlds"),e.t("loading.potions"),e.t("loading.treasures")],interval:1500},null,8,["messages"])):(n(),x(L,{key:1},[e.isListView?C("",!0):(n(!0),x(L,{key:0},A(e.filteredAndSortedStories,a=>(n(),V(e.BasicCard,{as:"h2",slug:a.key,key:a.key,title:a.name,time:parseInt(a.time),storyContent:a.story,isStory:""},null,8,["slug","title","time","storyContent"]))),128)),e.isListView?(n(),V(e.VContainer,{key:1,class:"sections-filtered__content-list"},{default:i(()=>[(n(!0),x(L,null,A(e.filteredAndSortedStories,a=>(n(),V(e.PlainCard,{key:a.key,story:a},null,8,["story"]))),128))]),_:1})):C("",!0)],64))],2)])}const fe=k(re,[["render",oe],["__scopeId","data-v-76c15449"]]);export{fe as default};
