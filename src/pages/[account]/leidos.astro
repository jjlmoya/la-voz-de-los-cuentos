---
import NavLayout from '../../layouts/NavLayout.astro'
import AccountPage from '../../components/Page/AccountPage.vue'
import StoriesSection from '../../components/Sections/StoriesSection.vue'
import TutorialProgress from '../../components/Tutorial/Progress.vue'
import t from '../../translations'
import { toAccount } from '../../router'
import useStories from '../../composables/useStories'

// Get data (this runs on the server)
const stories = useStories().getCompleteStories()

export async function getStaticPaths() {
  const paths = [
    {
      params: {
        account: import.meta.env.PUBLIC_LANG === 'en' ? 'account' : 'cuenta'
      }
    }
  ]
  return paths
}
---

<NavLayout
  title={t('page.account.resume.read')}
  description={t('page.account.description')}
  url={toAccount()}
>
  <AccountPage client:load>
    <StoriesSection :stories={stories}>
      <template #fallback>
        <TutorialProgress />
      </template>
    </StoriesSection>
  </AccountPage>
</NavLayout>
